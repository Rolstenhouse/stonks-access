(this["webpackJsonpstonks-access"]=this["webpackJsonpstonks-access"]||[]).push([[0],{124:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),i=n.n(c),r=n(12),o=n.n(r),s=(n(92),n(93),n(73)),l=n(170),d=n(8),j=n(15),u=n.n(j),b=n(68),h=n(164),O=n(30),g=n(55),m=n.n(g),p=n(54),f=n.n(p),x=n(74),v=n(36),y=n(39),k=n(153),w=n(157),S=n(171),C=n(160),E=n(161),I=n(162),T=n(163),A="https://api.withlaguna.com";var D={tradeType:{title:"Trade Type (buy/sell/other)",pl:"buy/sell/other",init:"",required:!0},tradeDate:{title:"Trade Date (mm/dd/yyyy)",pl:"mm/dd/yyyy",init:"",required:!0},costBasis:{title:"Cost Basis",pl:"$10.01",init:"",required:!0},quantity:{title:"Quantity",pl:"5",init:"",required:!0},ticker:{title:"Ticker",pl:"AAPL",init:"",required:!0},priceSold:{title:"Sold price",pl:"100.0",init:""},percentageReturn:{title:"Return Percentage",pl:"305.75%",init:""}},_=function(e){var t=e.userId,n=e.onSubmit,i=Object.keys(D).reduce((function(e,t){return e[t]=D[t].init||"",e}),{}),r=Object(c.useState)(i),o=Object(d.a)(r,2),s=o[0],l=o[1],j=Object(c.useState)(i),b=Object(d.a)(j,2),h=b[0],O=b[1],g=Object(c.useState)(""),m=Object(d.a)(g,2),p=m[0],f=m[1],x=function(e){e.preventDefault(),l(Object(y.a)(Object(y.a)({},s),{},Object(v.a)({},e.target.name,e.target.value))),O(Object(y.a)(Object(y.a)({},h),{},Object(v.a)({},e.target.name,!1)))};return Object(a.jsxs)(k.a,{style:{height:50},children:[Object.entries(D).map((function(e){var t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(a.jsx)(w.a,{children:Object(a.jsx)(S.a,{name:n,onChange:x,placeholder:c.pl,value:s[n],error:!!h[n],size:"tiny",fullWidth:!0,helperText:null===c||void 0===c?void 0:c.helperText,required:null===c||void 0===c?void 0:c.required})},n)})),Object(a.jsxs)(w.a,{children:[Object(a.jsx)(C.a,{onClick:function(e){e.preventDefault();var a=Object.entries(D).filter((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return(null===a||void 0===a?void 0:a.required)&&!s[n]})).reduce((function(e,t){var n=Object(d.a)(t,2),a=n[0];n[1];return e[a]=!0,e}),{});Object.keys(a).length>0?O(a):(console.log(s),u.a.post("".concat(A,"/stonks/access/insert/").concat(t),s).then((function(e){e.data.allow?(n(s),l(i)):f(e.data)})).catch((function(e){e.response&&f(JSON.stringify(e.response.data.err))})))},style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},children:"Add trade"}),!!p&&Object(a.jsx)(a.Fragment,{children:p})]})]})},F=function(e){var t=e.userId,n=Object(c.useState)([]),i=Object(d.a)(n,2),r=i[0],o=i[1],s=Object(O.a)();Object(c.useEffect)((function(){u.a.get("".concat(A,"/stonks/access/trades/").concat(t)).then((function(e){e.data.allow&&o(e.data.trades)}))}),[]);return Object(a.jsxs)(E.a,{size:"small",style:{marginTop:s.spacing(4),marginBottom:s.spacing(4)},children:[Object(a.jsx)(I.a,{children:Object(a.jsx)(k.a,{children:Object.entries(D).map((function(e){var t=Object(d.a)(e,2),n=t[0],c=t[1];return Object(a.jsx)(w.a,{children:c.title},n)}))})}),Object(a.jsxs)(T.a,{children:[r.map((function(e){return Object(a.jsxs)(k.a,{children:[Object(a.jsx)(w.a,{children:e.tradeType}),Object(a.jsx)(w.a,{children:e.tradeDate}),Object(a.jsx)(w.a,{children:e.costBasis}),Object(a.jsx)(w.a,{children:e.quantity}),Object(a.jsx)(w.a,{children:e.ticker}),Object(a.jsx)(w.a,{children:e.soldPrice}),Object(a.jsx)(w.a,{children:e.returnPercentage})]})})),Object(a.jsx)(_,{onSubmit:function(e){o([].concat(Object(x.a)(r),[e]))},userId:t})]})]})},P=n(77),B=n(159),W=n(166),q=n(175),L=n(158),N=n(174),R=n(167),z=n(173),U=(n(168),n(169)),Y=n(172),J="https://api.withlaguna.com";var M=function(e){var t=e.advanceStep,n=Object(c.useState)(""),i=Object(d.a)(n,2),r=i[0],o=i[1],s=Object(c.useState)(!1),l=Object(d.a)(s,2),j=l[0],b=l[1],g=Object(O.a)(),m=function(){b(!0)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(h.a,{}),Object(a.jsx)(P.a,{variant:"h4",children:"Enter your early access code"}),Object(a.jsxs)("form",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[Object(a.jsx)(S.a,{label:"Early Access Code",error:j,value:r,onChange:function(e){return o(e.target.value)},placeholder:"OPEN SESAME",helperText:j&&"Invalid access code. Please try again :)"}),Object(a.jsx)(C.a,{style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white",marginLeft:g.spacing(4)},onClick:function(e){b(!1),u.a.get("".concat(J,"/stonks/access/code/").concat(r)).then((function(e){e.data.allow?t():m()})).catch((function(){m()}))},children:"Enter"})]})]})},H=function(e){var t=e.advanceStep,n=e.setUserId,i=e.editId,r=e.editDetails,o=e.setEditDetails,s=e.refresh,l=Object(O.a)(),j=Object(c.useState)(!1),b=Object(d.a)(j,2),h=b[0],g=b[1],m=function(){g(!0)},p=Object(c.useState)(r.title),f=Object(d.a)(p,2),x=f[0],v=f[1],y=Object(c.useState)(r.description),k=Object(d.a)(y,2),w=k[0],E=k[1],I=Object(c.useState)(r.link),T=Object(d.a)(I,2),A=T[0],D=T[1],_=Object(c.useState)(r.subdomain),U=Object(d.a)(_,2),M=U[0],H=U[1],Q=Object(c.useState)(r.name),V=Object(d.a)(Q,2),$=V[0],G=V[1],K=Object(c.useState)(r.email),X=Object(d.a)(K,2),Z=X[0],ee=X[1],te=Object(c.useState)(r.phone),ne=Object(d.a)(te,2),ae=ne[0],ce=ne[1],ie=Object(c.useState)(r.show_amounts),re=Object(d.a)(ie,2),oe=re[0],se=re[1],le=Object(c.useState)(""),de=Object(d.a)(le,2),je=de[0],ue=de[1];Object(c.useEffect)((function(){v(r.title),E(r.description),D(r.link),H(r.subdomain),G(r.name),ee(r.email),ce(r.phone),se(r.show_amounts),i&&u.a.post("".concat(J,"/stonks/access/exchange"),{edit_id:i}).then((function(e){ue(e.data.user)}))}),[r]);var be=r.plaid_connected!=!!r.subdomain,he=function(e){g(!1),u.a.post("".concat(J,"/stonks/access/form"),{title:x,description:w,link:A,subdomain:M,name:$,email:Z,phone:ae,show_amounts:"yes"===oe,edit_id:i}).then((function(e){e.data.allow?(n(e.data.id),o({title:x,description:w,link:A,subdomain:M,show_amounts:oe?"yes":"no",name:$,email:Z,phone:ae,plaid_connected:r.plaid_connected}),t()):m()})).catch((function(){m()}))},Oe=Object(c.useState)(""),ge=Object(d.a)(Oe,2),me=ge[0],pe=ge[1],fe=Object(c.useState)(""),xe=Object(d.a)(fe,2),ve=xe[0],ye=xe[1],ke=Object(c.useState)(""),we=Object(d.a)(ke,2),Se=we[0],Ce=we[1],Ee=function(e){if(i){if(e.subdomain&&e.subdomain==r.subdomain)return;if(e.email&&e.email===r.email)return;if(e.phone&&e.phone===r.phone)return}u.a.get("".concat(J,"/stonks/access/check_unique"),{params:e}).then((function(e){})).catch((function(){e.subdomain?pe("Subdomain has already been claimed"):e.email?ye("Email has already been claimed"):e.phone&&Ce("Phone has already been claimed")}))},Ie="https://".concat(r.subdomain,".withlaguna.com");return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(P.a,{variant:"h4",children:"Account creation and configuration"}),be&&Object(a.jsxs)("div",{style:{padding:l.spacing(4)},children:[Object(a.jsx)(Y.a,{severity:"error",children:"Your page is live, but your brokerage hasn't been connected yet"}),Object(a.jsx)(C.a,{style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},onClick:he,children:"Import your trades"})]}),s&&Object(a.jsxs)("div",{style:{padding:l.spacing(4)},children:[Object(a.jsx)(Y.a,{severity:"warning",children:"Your brokerage credentials have expired. Please re-log them"}),Object(a.jsx)(C.a,{style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},onClick:he,children:"Reconnect"})]}),Object(a.jsxs)("form",{children:[Object(a.jsxs)(B.a,{style:{padding:l.spacing(6),marginBottom:l.spacing(2)},children:[Object(a.jsx)(P.a,{variant:"h6",children:"Your page information"}),Object(a.jsxs)(P.a,{variant:"caption",children:["Used to customize your page :)"," ",Object(a.jsx)(W.a,{href:"https://rob.withlaguna.com",children:"Sample Site"})]}),Object(a.jsx)(S.a,{value:x,onChange:function(e){return v(e.target.value)},label:"Title",helperText:"Ex) Rob's Stonks",fullWidth:!0}),Object(a.jsx)(S.a,{value:w,onChange:function(e){return E(e.target.value)},label:"Description",helperText:"Ex) Trading on long-term horizons",fullWidth:!0}),Object(a.jsx)(S.a,{value:A,onChange:function(e){return D(e.target.value)},label:"Personal Bio Link (optional)",helperText:"Twitter handle, website, Linkedin, etc. Write as https://withterra.com",fullWidth:!0}),Object(a.jsx)(S.a,{value:M,onChange:function(e){H(e.target.value),pe("")},onBlur:function(e){return Ee({subdomain:M})},label:"Desired subdomain",helperText:me||"i.e enter 'rob' if you want, rob.withlaguna.com",error:!!me,fullWidth:!0}),Object(a.jsxs)(q.a,{component:"fieldset",margin:"none",fullWidth:!0,size:"small",style:{textAlign:"left",marginTop:l.spacing(1)},children:[Object(a.jsx)(L.a,{component:"legend",children:"Portfolio privacy setting"}),Object(a.jsxs)(N.a,{"aria-label":"show amounts",name:"Show portfolio amounts",value:oe,onChange:function(e){return se(e.target.value)},children:[Object(a.jsx)(R.a,{value:"no",control:Object(a.jsx)(z.a,{color:"primary",size:"small"}),label:"Show portfolio percentage only"}),Object(a.jsx)(R.a,{value:"yes",control:Object(a.jsx)(z.a,{color:"primary",size:"small"}),label:"Show portfolio amounts in USD"})]})]})]}),Object(a.jsxs)(B.a,{style:{padding:l.spacing(6),marginBottom:l.spacing(2)},children:[Object(a.jsx)(P.a,{variant:"h6",children:"Confidential information"}),Object(a.jsx)(P.a,{variant:"caption",children:"Information entered in this section will NEVER be revealed on your site"}),Object(a.jsx)(S.a,{value:$,onChange:function(e){return G(e.target.value)},label:"Full name",fullWidth:!0}),Object(a.jsx)(S.a,{value:Z,onChange:function(e){ee(e.target.value),ye("")},onBlur:function(){Ee({email:Z})},helperText:ve||"",error:!!ve,label:"Email",fullWidth:!0}),Object(a.jsx)(S.a,{value:ae,onChange:function(e){ce(e.target.value),Ce("")},onBlur:function(e){return Ee({phone:ae})},helperText:Se||"",error:!!Se,label:"Phone",fullWidth:!0})]}),h&&Object(a.jsx)(P.a,{color:"red",children:"Something went wrong :(. Please double check your information"}),Object(a.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center"},children:[!!r.subdomain&&Object(a.jsxs)("div",{children:[Object(a.jsx)(P.a,{children:"Check out your page: "}),Object(a.jsx)(W.a,{href:Ie,children:Ie})]}),Object(a.jsxs)(C.a,{style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},onClick:he,children:[i?"Update":"Submit"," Information"]})]})]}),!!je&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(P.a,{variant:"h4",children:"Manual trades"}),Object(a.jsx)(F,{userId:je})]})]})},Q=function(e){var t=e.advanceStep,n=e.userId,i=e.refresh,r=e.title,o=Object(c.useState)(""),s=Object(d.a)(o,2),l=s[0],j=s[1],h=Object(c.useState)(!1),g=Object(d.a)(h,2),m=g[0],p=g[1],f=Object(c.useState)(!1),x=Object(d.a)(f,2),v=x[0],y=x[1],k=Object(O.a)();Object(c.useEffect)((function(){u.a.get("".concat(J,"/stonks/access/plaid_token/").concat(n),{params:{refresh:i}}).then((function(e){e.data.link_token?j(e.data.link_token):w()})).catch((function(){w()}))}),[]);var w=function(){p(!0)},S={token:l,onSuccess:Object(c.useCallback)((function(e,a){i?t():u.a.post("".concat(J,"/stonks/access/plaid/").concat(n),{token:e,metadata:a}).then((function(e){e.data.allow?t():w()}))}))},E=Object(b.usePlaidLink)(S),I=E.open,T=(E.ready,E.plaidError);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(P.a,{variant:"h5",children:r}),Object(a.jsx)(P.a,{variant:"h4",children:"Connect your investment brokerage"}),Object(a.jsx)(P.a,{children:"Your portfolio is automatically monitored, and trades are immediately updated using Plaid, the standard in brokerage connections."}),Object(a.jsx)(P.a,{variant:"caption",children:"Only read access is allowed"}),(m||T)&&Object(a.jsx)(P.a,{children:" Something went wrong :( "}),Object(a.jsxs)("div",{style:{display:"flex",justifyContent:"center",marginTop:k.spacing(2),alignItems:"center"},children:[Object(a.jsx)(C.a,{onClick:function(){I()},style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},children:"Connect brokerage with Plaid"}),Object(a.jsx)("div",{style:{marginLeft:k.spacing(2),marginRight:k.spacing(2)},children:"or"}),Object(a.jsx)(C.a,{component:"label",style:{color:"linear-gradient(to top right, #A01A7D, #EC4067)"},onClick:function(){y(!0)},children:"Enter trades manually"})]}),Object(a.jsx)(a.Fragment,{children:v&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(F,{userId:n}),Object(a.jsx)(C.a,{onClick:function(){t()},style:{backgroundImage:"linear-gradient(to top right, #729FBF, #E0CDE1)",color:"white"},children:"CONTINUE"})]})})]})},V=function(){var e=m()(),t=e.width,n=e.height;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{width:t,height:n}),Object(a.jsx)(P.a,{variant:"h4",children:"Your page is building! We'll send you an email when it's ready"}),Object(a.jsx)(P.a,{variant:"p1",children:"We've gotten reports that our emails are ending in your spam box. Please double-check there as well after ~5 min"}),Object(a.jsx)(P.a,{variant:"caption",children:"Feedback? Email team@withlaguna.com"})]})},$=function(){var e=m()(),t=e.width,n=e.height;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(f.a,{width:t,height:n}),Object(a.jsx)(P.a,{variant:"h4",children:"Thanks for updating your page :)"}),Object(a.jsx)(P.a,{variant:"caption",children:"Feedback? Email team@withlaguna.com"})]})},G=function(){var e=Object(c.useState)(1),t=Object(d.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(!1),o=Object(d.a)(r,2),s=o[0],l=o[1],j=Object(c.useState)(1),b=Object(d.a)(j,2),h=b[0],g=b[1],m=Object(c.useState)(),p=Object(d.a)(m,2),f=p[0],x=p[1],v=Object(c.useState)(!1),y=Object(d.a)(v,2),k=y[0],w=y[1],S=Object(c.useState)({title:"",description:"",link:"",subdomain:"",show_amounts:"no",name:"",email:"",phone:"",plaid_connected:!1}),C=Object(d.a)(S,2),E=C[0],I=C[1],T=Object(O.a)();return Object(c.useEffect)((function(){var e=window.location.search,t=new URLSearchParams(e);t.get("plaid_refresh")&&(i(1),l(!0));var n=t.get("edit");n&&(i(1),x(n),u.a.get("".concat(J,"/stonks/access/edit_info"),{params:{edit_id:n}}).then((function(e){var t=Object.assign({},e.data);t.show_amounts=t.show_amounts?"yes":"no",I(t)})).catch((function(e){console.log(e),w(!0)})))}),[]),Object(a.jsx)(U.a,{container:!0,justify:"center",alignItems:"center",style:{minHeight:"100vh",backgroundImage:"linear-gradient(to top right, #669bbc, #ecd1e5)"},children:Object(a.jsx)(U.a,{item:!0,xs:11,sm:8,md:6,children:Object(a.jsx)(B.a,{style:{paddingTop:T.spacing(12),paddingBottom:T.spacing(12)},children:n>=0&&(k?Object(a.jsx)("div",{children:"Something went wrong with laguna"}):0===n?Object(a.jsx)(M,{advanceStep:function(){return i(1)}}):1===n?Object(a.jsx)(H,{advanceStep:function(){return E.plaid_connected?"":i(2)},setUserId:g,refresh:s,editId:f,editDetails:E,setEditDetails:I}):2===n?Object(a.jsx)(Q,{userId:h,advanceStep:function(){return i(3)},refresh:s,title:E.title}):3===n?Object(a.jsx)(V,{}):4===n?Object(a.jsx)($,{}):Object(a.jsx)(a.Fragment,{}))})})})},K=Object(s.a)({typography:{fontFamily:["Nunito","Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(",")},palette:{secondary:{main:"#ffffff"}}});var X=function(){return Object(a.jsx)(l.a,{theme:K,children:Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(G,{})})})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,176)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(X,{})}),document.getElementById("root")),Z()},92:function(e,t,n){},93:function(e,t,n){}},[[124,1,2]]]);
//# sourceMappingURL=main.499d04b6.chunk.js.map