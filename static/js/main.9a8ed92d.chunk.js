(this["webpackJsonpstonks-access"]=this["webpackJsonpstonks-access"]||[]).push([[0],{129:function(e,t,a){},130:function(e,t,a){},168:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a(0),i=a.n(c),r=a(12),s=a.n(r),o=(a(129),a(130),a(114)),l=a(241),d=(a(85),a(105),a(106)),j=a(8),h=a(13),u=a.n(h),b=a(107),p=a(223),g=a(15),O=a(78),m=a.n(O),x=a(77),f=a.n(x),v=a(75),y=a(36),w=a(34),k=(a(116),a(210)),S=a(214),C=a(242),I=a(218),E=a(219),_=a(220),A=a(221),F=a(42);var D=a(69),P=a(70),T=a(76),N=a(74),U=(a(155),a(222));var B=function(e){Object(T.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).state={value_ticker:n.props.ticker,value_weight:n.props.weight,errText:void 0},n}return Object(P.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsxs)(k.a,{children:[Object(n.jsx)(S.a,{children:Object(n.jsx)(C.a,{value:this.state.value_ticker,placeholder:"AAPL/CASH",InputProps:{style:{color:""==this.state.value_ticker?void 0:this.props.color}},inputProps:{style:{textTransform:"uppercase"}},onChange:function(t){e.setState({value_ticker:t.target.value}),e.props.handleEdit(t.target.value.toUpperCase(),parseFloat(e.state.value_weight),e.props.index)}})}),Object(n.jsx)(S.a,{children:Object(n.jsx)(F.a,{allowNegative:!1,decimalScale:"1",customInput:C.a,placeholder:this.props.weightPlace,InputProps:{endAdornment:Object(n.jsx)(U.a,{position:"start",children:"%"})},onValueChange:function(t){console.log("handle change",t.floatValue),e.setState({value_weight:t.floatValue}),e.props.handleEdit(e.state.value_ticker,t.floatValue,e.props.index)}})})]})}}]),a}(i.a.Component),L=a(112),W=["#0074D9","#FF4136","#2ECC40","#FF851B","#7FDBFF","#B10DC9","#FFDC00","#001f3f","#39CCCC","#01FF70","#85144b","#F012BE","#3D9970","#111111","#AAAAAA"],M=a(46),R="https://api.withlaguna.com",Y=function(e){Object(T.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(D.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){console.log(n.props.editId),u.a.get("".concat(R,"/stonks/access/holdings"))},n.handleCreate=function(){u.a.post("".concat(R,"/stonks/holdings/create"),{user_id:n.props.userId,edit_id:n.props.editId,portfolio:n.state.trades.filter((function(e){return!isNaN(e.weight)&&""!=e.ticker}))}).then((function(e){n.props.advanceStep&&n.props.advanceStep(8)})).catch((function(e){if(e.response){var t=e.response.data.errMsg;n.setState({errMsg:t})}}))},n.handleHoldingEdit=function(e,t,a){var c=!0,i=n.state.trades;a+1>=i.length&&""!=e&&!isNaN(t)&&i.push({ticker:"",weight:null}),i[a]={weight:t,ticker:e};var r=i.reduce((function(e,t){return e+(t.weight?parseFloat(t.weight):0)}),0);100!=r&&(c=!1);var s=void 0;i.reduce((function(t,n,c){return t||n.ticker==e&&a!=c&&""!=e}),!1)&&(s="Duplicate ticker: ".concat(e),c=!1),console.log("total weight",r),n.setState({trades:i,total_weight:r,errMsg:s,validPortfolio:c})},n.state={trades:[{ticker:"",weight:null}],total_weight:0,validPortfolio:!1},n}return Object(P.a)(a,[{key:"render",value:function(){var e=this,t=this.state.trades.map((function(e,t){var a=isNaN(e.weight)?0:e.weight;return{title:e.ticker,value:a,color:W[t%W.length]}}));return Object(n.jsxs)("div",{children:[Object(n.jsx)(M.a,{variant:"h4",children:"Manually Enter Your Holdings to Create Your Portfolio"}),Object(n.jsx)(M.a,{style:{color:"gray"},variant:"subtitle1",children:"Ensure your percentages add up to 100%"}),Object(n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",marginTop:20},children:[Object(n.jsxs)("div",{style:{flexGrow:"1",marginLeft:20},children:[Object(n.jsxs)(E.a,{children:[Object(n.jsx)(_.a,{children:Object(n.jsxs)(k.a,{children:[Object(n.jsx)(S.a,{children:"Ticker"}),Object(n.jsx)(S.a,{children:"Percent"})]})}),Object(n.jsx)(A.a,{children:this.state.trades.map((function(t,a){return Object(n.jsx)(B,{weightPlace:(100-e.state.total_weight).toFixed(1),handleEdit:e.handleHoldingEdit,ticker:t.ticker,weight:t.weight,index:a,color:W[a%W.length]})}))}),void 0!=this.state.errMsg&&Object(n.jsx)(M.a,{variant:"caption",style:{color:"red",textAlign:"left",marginTop:5},children:this.state.errMsg})]}),Object(n.jsxs)("div",{style:{textAlign:"right",marginTop:5},children:["Total:"," ",Object(n.jsxs)("span",{style:{color:this.state.total_weight<=100?"green":"red"},children:[this.state.total_weight,"%"," "]})," ","of 100%"]}),Object(n.jsx)(I.a,{disabled:!this.state.validPortfolio,onClick:this.handleCreate,style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white",opacity:this.state.validPortfolio?1:.5,marginTop:20},children:"Create Portfolio"})]}),Object(n.jsx)(L.PieChart,{style:{flexGrow:"1"},radius:20,lineWidth:15,viewBoxSize:[100,100],center:[50,30],lengthAngle:Math.min(this.state.total_weight/100*360,360),data:t})]})]})}}]),a}(i.a.Component),V=a(230),z=a(224),H=a(169),G=a(215),J=a(216),q=a(248),K=a(226),Q=a(244),X=a(227),Z=a(228),$=a(229),ee=a(225),te=a(245),ae="https://api.withlaguna.com";var ne=function(e){var t=e.advanceStep,a=Object(c.useState)(""),i=Object(j.a)(a,2),r=i[0],s=i[1],o=Object(c.useState)(!1),l=Object(j.a)(o,2),d=l[0],h=l[1],b=Object(g.a)(),O=function(){h(!0)};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(p.a,{}),Object(n.jsx)(M.a,{variant:"h4",children:"Enter your early access code"}),Object(n.jsxs)("form",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[Object(n.jsx)(C.a,{label:"Early Access Code",error:d,value:r,onChange:function(e){return s(e.target.value)},placeholder:"OPEN SESAME",helperText:d&&"Invalid access code. Please try again :)"}),Object(n.jsx)(I.a,{style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white",marginLeft:b.spacing(4)},onClick:function(e){h(!1),u.a.get("".concat(ae,"/stonks/access/code/").concat(r)).then((function(e){e.data.allow?t():O()})).catch((function(){O()}))},children:"Enter"})]})]})},ce=function(e){var t=e.advanceStep,a=e.setUserId,i=e.editId,r=e.editDetails,s=e.setEditDetails,o=e.refresh,l=Object(g.a)(),d=Object(c.useState)(!1),h=Object(j.a)(d,2),b=h[0],p=h[1],O=function(){p(!0)},m=Object(c.useState)(r.title),x=Object(j.a)(m,2),f=x[0],v=x[1],y=Object(c.useState)(r.description),w=Object(j.a)(y,2),k=w[0],S=w[1],E=Object(c.useState)(r.link),_=Object(j.a)(E,2),A=_[0],F=_[1],D=Object(c.useState)(r.subdomain),P=Object(j.a)(D,2),T=P[0],N=P[1],U=Object(c.useState)(r.name),B=Object(j.a)(U,2),L=B[0],W=B[1],R=Object(c.useState)(r.email),V=Object(j.a)(R,2),X=V[0],Z=V[1],$=Object(c.useState)(r.phone),ee=Object(j.a)($,2),ne=ee[0],ce=ee[1],ie=Object(c.useState)(r.show_amounts),re=Object(j.a)(ie,2),se=re[0],oe=re[1],le=Object(c.useState)(""),de=Object(j.a)(le,2),je=de[0],he=de[1];Object(c.useEffect)((function(){v(r.title),S(r.description),F(r.link),N(r.subdomain),W(r.name),Z(r.email),ce(r.phone),oe(r.show_amounts),i&&u.a.post("".concat(ae,"/stonks/access/exchange"),{edit_id:i}).then((function(e){he(e.data.user)}))}),[r]);var ue=r.plaid_connected!=!!r.subdomain,be=function(e){p(!1),u.a.post("".concat(ae,"/stonks/access/form"),{title:f,description:k,link:A,subdomain:T,name:L,email:X,phone:ne,show_amounts:"yes"===se,edit_id:i}).then((function(e){e.data.allow?(a(e.data.id),s({title:f,description:k,link:A,subdomain:T,show_amounts:se?"yes":"no",name:L,email:X,phone:ne,plaid_connected:r.plaid_connected,editUrl:e.data.editUrl}),t()):O()})).catch((function(){O()}))},pe=Object(c.useState)(""),ge=Object(j.a)(pe,2),Oe=ge[0],me=ge[1],xe=Object(c.useState)(""),fe=Object(j.a)(xe,2),ve=fe[0],ye=fe[1],we=Object(c.useState)(""),ke=Object(j.a)(we,2),Se=ke[0],Ce=ke[1],Ie=function(e){if(i){if(e.subdomain&&e.subdomain==r.subdomain)return;if(e.email&&e.email===r.email)return;if(e.phone&&e.phone===r.phone)return}u.a.get("".concat(ae,"/stonks/access/check_unique"),{params:e}).then((function(e){})).catch((function(){e.subdomain?me("Subdomain has already been claimed"):e.email?ye("Email has already been claimed"):e.phone&&Ce("Phone has already been claimed")}))},Ee="https://".concat(r.subdomain,".withlaguna.com");return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(M.a,{variant:"h4",children:"Account creation and configuration"}),!i&&Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(M.a,{variant:"h6",children:Object(n.jsx)(z.a,{href:"/#/signin",children:"Sign in"})})}),ue&&Object(n.jsxs)("div",{style:{padding:l.spacing(4)},children:[Object(n.jsx)(te.a,{severity:"error",children:"Your page is live, but your brokerage hasn't been connected yet"}),Object(n.jsx)(I.a,{style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},onClick:be,children:"Import your trades"})]}),o&&Object(n.jsxs)("div",{style:{padding:l.spacing(4)},children:[Object(n.jsx)(te.a,{severity:"warning",children:"Your brokerage credentials have expired. Please re-log them"}),Object(n.jsx)(I.a,{style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},onClick:be,children:"Reconnect"})]}),Object(n.jsxs)("form",{children:[Object(n.jsxs)(H.a,{style:{padding:l.spacing(6),marginBottom:l.spacing(2)},children:[Object(n.jsx)(M.a,{variant:"h6",children:"Your page information"}),Object(n.jsxs)(M.a,{variant:"caption",children:["Used to customize your page :)"," ",Object(n.jsx)(z.a,{href:"https://rob.withlaguna.com",children:"Sample Site"})]}),Object(n.jsx)(C.a,{value:f,onChange:function(e){return v(e.target.value)},label:"Title",helperText:"Ex) Rob's Stonks",fullWidth:!0}),Object(n.jsx)(C.a,{value:k,onChange:function(e){return S(e.target.value)},label:"Description",helperText:"Ex) Trading on long-term horizons",fullWidth:!0}),Object(n.jsx)(C.a,{value:A,onChange:function(e){return F(e.target.value)},label:"Personal Bio Link (optional)",helperText:"Twitter handle, website, Linkedin, etc. Write as https://withterra.com",fullWidth:!0}),Object(n.jsx)(C.a,{value:T,onChange:function(e){var t=e.target.value;t=t.replace(/\W/g,""),N(t),me("")},onBlur:function(e){return Ie({subdomain:T})},label:"Desired subdomain",helperText:Oe||"i.e enter 'rob' if you want, rob.withlaguna.com",error:!!Oe,fullWidth:!0}),Object(n.jsxs)(G.a,{component:"fieldset",margin:"none",fullWidth:!0,size:"small",style:{textAlign:"left",marginTop:l.spacing(1)},children:[Object(n.jsx)(J.a,{component:"legend",children:"Portfolio privacy setting"}),Object(n.jsxs)(q.a,{"aria-label":"show amounts",name:"Show portfolio amounts",value:se,onChange:function(e){return oe(e.target.value)},children:[Object(n.jsx)(K.a,{value:"no",control:Object(n.jsx)(Q.a,{color:"primary",size:"small"}),label:"Show portfolio percentage only"}),Object(n.jsx)(K.a,{value:"yes",control:Object(n.jsx)(Q.a,{color:"primary",size:"small"}),label:"Show portfolio amounts in USD"})]})]})]}),Object(n.jsxs)(H.a,{style:{padding:l.spacing(6),marginBottom:l.spacing(2)},children:[Object(n.jsx)(M.a,{variant:"h6",children:"Confidential information"}),Object(n.jsx)(M.a,{variant:"caption",children:"Information entered in this section will NEVER be revealed on your site"}),Object(n.jsx)(C.a,{value:L,onChange:function(e){return W(e.target.value)},label:"Full name",fullWidth:!0}),Object(n.jsx)(C.a,{value:X,onChange:function(e){Z(e.target.value),ye("")},onBlur:function(){Ie({email:X})},helperText:ve||"",error:!!ve,label:"Email",fullWidth:!0}),Object(n.jsx)(C.a,{value:ne,onChange:function(e){ce(e.target.value),Ce("")},onBlur:function(e){return Ie({phone:ne})},helperText:Se||"",error:!!Se,label:"Phone",fullWidth:!0})]}),b&&Object(n.jsx)(M.a,{color:"red",children:"Something went wrong :(. Please double check your information"}),Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center"},children:[!!r.subdomain&&Object(n.jsxs)("div",{children:[Object(n.jsx)(M.a,{children:"Check out your page: "}),Object(n.jsx)(z.a,{href:Ee,children:Ee})]}),Object(n.jsxs)(I.a,{style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},onClick:be,children:[i?"Update":"Submit"," Information"]})]})]}),!!je&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(M.a,{variant:"h4",children:"Manual trades"}),Object(n.jsx)(Y,{userId:je})]})]})},ie=function(e){var t=e.userId,a=e.advanceStep,i=Object(c.useState)(!1),r=Object(j.a)(i,2),s=(r[0],r[1],Object(c.useState)({})),o=Object(j.a)(s,2),l=o[0],d=o[1],h=Object(c.useState)(!1),b=Object(j.a)(h,2),p=b[0],g=b[1],O=Object(c.useState)({preview:"",raw:"",name:""}),m=Object(j.a)(O,2),x=m[0],f=m[1],v=function(e){var a=e.replace(/[^\w\d_\-.]+/gi,"");u.a.get("".concat(ae,"/stonks/access/sign/").concat(t),{params:{file_name:a}}).then((function(e){d(e.data)}))};return Object(n.jsx)(n.Fragment,{children:x.preview?p?Object(n.jsx)(X.a,{}):Object(n.jsxs)(I.a,{style:{backgroundImage:"linear-gradient(to top right, #669bbc, #ecd1e5)",color:"white",fontWeight:800},onClick:function(e){g(!0),e.preventDefault(),console.log(l),console.log(x);var n=new FormData;Object.keys(l.fields).forEach((function(e){var t=l.fields[e];n.append(e,t)})),n.append("file",x.raw);var c={headers:{"content-type":"multipart/form-data"},onUploadProgress:function(e){!function(e){console.log(e)}(parseInt(Math.round(100*e.loaded/e.total)))}};u.a.post("".concat(l.url),n,c).then((function(e){a(3),u.a.get("".concat(ae,"/stonks/access/uploaded/").concat(t)).then((function(e){console.log(e)})).catch(console.error("Did not set manual trade issue"))})).catch(console.error("Uploading problemo")).finally(g(!1))},children:["Upload ",x.name]}):Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(n.jsxs)(I.a,{component:"label",style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},children:["Upload a screenshot of your positions",Object(n.jsx)("input",{type:"file",hidden:!0,onChange:function(e){if(e.target.files.length){var t=e.target.value.split("\\").pop();f({preview:URL.createObjectURL(e.target.files[0]),raw:e.target.files[0],name:t}),v(t)}}})]}),Object(n.jsx)(M.a,{variant:"caption",children:"We'll automatically process the data for you"})]})})},re=function(e){var t=e.advanceStep,a=e.userId,i=e.refresh,r=e.title,s=Object(c.useState)(""),o=Object(j.a)(s,2),l=o[0],d=o[1],h=Object(c.useState)(!1),p=Object(j.a)(h,2),O=p[0],m=p[1],x=Object(c.useState)(!1),f=Object(j.a)(x,2),v=f[0],y=(f[1],Object(g.a)()),w=Object(c.useState)([]),k=Object(j.a)(w,2),S=k[0],C=k[1];Object(c.useEffect)((function(){u.a.get("".concat(ae,"/stonks/access/plaid_token/").concat(a),{params:{refresh:i}}).then((function(e){e.data.link_token?d(e.data.link_token):E()})).catch((function(){E()})),u.a.get("https://api.withlaguna.com/stonks/access/plaid_status").then((function(e){var t;C((null===(t=e.data)||void 0===t?void 0:t.brokers)||[])}))}),[]);var E=function(){m(!0)},_={token:l,onSuccess:Object(c.useCallback)((function(e,n){i?t(3):u.a.post("".concat(ae,"/stonks/access/plaid/").concat(a),{token:e,metadata:n}).then((function(e){e.data.allow?t(3):E()}))}))},A=Object(b.usePlaidLink)(_),F=A.open,D=(A.ready,A.plaidError);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(M.a,{variant:"h5",children:r}),Object(n.jsx)(M.a,{variant:"h4",children:"Connect your investment brokerage"}),Object(n.jsx)(M.a,{children:"Your portfolio is automatically monitored, and trades are immediately updated using Plaid, the standard in brokerage connections."}),Object(n.jsx)(M.a,{variant:"caption",children:"Only read access is allowed"}),(O||D||!r)&&Object(n.jsx)(M.a,{children:" Something went wrong :( "}),Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:y.spacing(2),flexDirection:"column"},children:[Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"column",maxWidth:"400px"},children:[Object(n.jsxs)(I.a,{onClick:function(){F()},style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},children:[Object(n.jsx)("b",{style:{marginRight:"4px"},children:"Auto"})," Connect brokerage"]}),S.map((function(e){return Object(n.jsx)(te.a,{style:{marginTop:y.spacing(2)},severity:"warning",children:e})}))]}),Object(n.jsx)("div",{style:{marginLeft:y.spacing(2),marginRight:y.spacing(2)},children:"or"}),Object(n.jsxs)(I.a,{component:"label",style:{backgroundImage:"linear-gradient(to top right, #bd5fa4, #f27995)",color:"white"},onClick:function(){t(5)},children:[Object(n.jsx)("b",{style:{marginRight:"4px"},children:"EASIEST"})," Upload a screenshot of your positions"]}),Object(n.jsx)(M.a,{variant:"caption",children:"We'll automatically process the data for you"}),Object(n.jsx)("div",{style:{marginLeft:y.spacing(2),marginRight:y.spacing(2)},children:"or"}),Object(n.jsxs)(I.a,{component:"label",style:{backgroundImage:"linear-gradient(to top right, #bd5fa4, #f27995)",color:"white"},onClick:function(){t(7)},children:[Object(n.jsx)("b",{style:{marginRight:"4px"},children:"Manual"})," Enter trades"]})]}),Object(n.jsx)(n.Fragment,{children:v&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Y,{userId:a}),Object(n.jsx)(I.a,{onClick:function(){t()},style:{backgroundImage:"linear-gradient(to top right, #729FBF, #E0CDE1)",color:"white"},children:"CONTINUE"})]})})]})},se=function(){var e=m()(),t=e.width,a=e.height;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.a,{width:t,height:a}),Object(n.jsx)(M.a,{variant:"h4",children:"Your page is building! We'll send you an email when it's ready"}),Object(n.jsx)(M.a,{variant:"p1",children:"We've gotten reports that our emails are ending in your spam box. Please double-check there as well after ~5 min"}),Object(n.jsx)(M.a,{variant:"caption",children:"Feedback? Email team@withlaguna.com"})]})},oe=function(e){var t=e.displayDetail,a=m()(),c=a.width,i=a.height;console.log("in finish with display",t);var r="".concat("https://").concat(t.subdomain).concat(".withlaguna.com/");return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.a,{width:c,height:i}),Object(n.jsxs)(M.a,{variant:"h4",children:["Congrats ",t.name,"!"]}),Object(n.jsx)(M.a,{variant:"h5",children:"Your page is ready at"}),Object(n.jsx)(M.a,{children:Object(n.jsxs)(z.a,{href:r,children:[t.subdomain,".withLaguna.com"]})}),Object(n.jsxs)(M.a,{style:{marginTop:30},children:["You can edit your profile at ",Object(n.jsx)("br",{}),Object(n.jsx)(z.a,{href:t.editUrl,children:t.editUrl})]}),Object(n.jsx)(I.a,{href:r,style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white",marginTop:50},children:"View Page"})]})},le=function(){var e=m()(),t=e.width,a=e.height;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.a,{width:t,height:a}),Object(n.jsx)(M.a,{variant:"h4",children:"Thanks for updating your page :)"}),Object(n.jsx)("br",{}),Object(n.jsx)(M.a,{variant:"caption",children:"Feedback? Email team@withlaguna.com"})]})},de=function(e){var t=e.userId,a=e.advanceStep;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("img",{width:"800px",src:"/upload_robinhood.png"}),Object(n.jsx)(ie,{userId:t,advanceStep:a})]})},je=function(e){Object(d.a)(e);var t=Object(c.useState)(!1),a=Object(j.a)(t,2),i=a[0],r=a[1],s=Object(c.useState)(!1),o=Object(j.a)(s,2),l=o[0],h=o[1],b=Object(c.useState)(""),p=Object(j.a)(b,2),O=p[0],m=p[1],x=Object(c.useState)(""),f=Object(j.a)(x,2),v=f[0],y=f[1],w=Object(g.a)();return Object(n.jsxs)("div",{style:{marginLeft:w.spacing(12),marginRight:w.spacing(12)},children:[Object(n.jsx)(M.a,{variant:"h5",children:"Enter your email address to get your sign-in link"}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),!i&&Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(n.jsx)(C.a,{value:v,onChange:function(e){return y(e.target.value)},label:"Email",error:!!O,helperText:O}),Object(n.jsx)("br",{}),l&&Object(n.jsx)(Z.a,{}),Object(n.jsx)(I.a,{component:"label",style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},onClick:function(){h(!0),u.a.get("".concat(ae,"/stonks/access/send"),{params:{email:v}}).then((function(){r(!0)})).catch((function(e){e.response?m(e.response.data.err):m("Please email support@withlaguna.com")})).finally((function(){h(!1)}))},children:"Submit"})]}),!!i&&Object(n.jsx)(M.a,{varian:"body",children:"You've been sent an email. Click it to access your admin page"}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsxs)(M.a,{variant:"caption",children:["Having an issue? ",Object(n.jsx)("a",{href:"mailto:team@withlaguna.com",children:"Contact us"})]})]})},he=function(){var e=Object(c.useState)(1),t=Object(j.a)(e,2),a=t[0],i=t[1],r=Object(c.useState)(!1),s=Object(j.a)(r,2),o=s[0],l=s[1],d=Object(c.useState)(),h=Object(j.a)(d,2),b=h[0],p=h[1],O=Object(c.useState)(),m=Object(j.a)(O,2),x=m[0],f=m[1],v=Object(c.useState)(!1),y=Object(j.a)(v,2),w=y[0],k=y[1],S=Object(c.useState)({title:"",description:"",link:"",subdomain:"",show_amounts:"no",name:"",email:"",phone:"",plaid_connected:!1}),C=Object(j.a)(S,2),I=C[0],E=C[1],_=Object(g.a)();return Object(c.useEffect)((function(){"#/signin"==window.location.hash&&i(6);var e=window.location.search,t=new URLSearchParams(e);t.get("plaid_refresh")&&l(!0);var a=t.get("plaid_login"),n=t.get("edit");n&&(i(1),f(n),a&&(u.a.post("".concat(ae,"/stonks/access/exchange"),{edit_id:n}).then((function(e){p(e.data.user)})),i(2)),u.a.get("".concat(ae,"/stonks/access/edit_info"),{params:{edit_id:n}}).then((function(e){var t=Object.assign({},e.data);t.show_amounts=t.show_amounts?"yes":"no",E(t)})).catch((function(e){console.log(e),k(!0)})))}),[]),Object(n.jsx)($.a,{container:!0,justify:"center",alignItems:"center",style:{minHeight:"100vh",backgroundImage:"linear-gradient(to top right, #669bbc, #ecd1e5)"},className:"App",children:Object(n.jsxs)($.a,{item:!0,xs:11,sm:8,md:6,children:[(7==a||5==a)&&Object(n.jsxs)(ee.a,{size:"small",style:{float:"left",marginTop:_.spacing(3)},onClick:function(){return i(2)},children:[Object(n.jsx)(V.a,{}),"Back"]}),Object(n.jsx)(H.a,{style:{paddingTop:_.spacing(12),paddingBottom:_.spacing(12)},children:a>=0&&(w?Object(n.jsx)("div",{children:"Something went wrong with laguna"}):0===a?Object(n.jsx)(ne,{advanceStep:function(){return i(1)}}):1===a?Object(n.jsx)(ce,{advanceStep:function(){return I.plaid_connected&&!o?"":i(2)},setUserId:p,refresh:o,editId:x,editDetails:I,setEditDetails:E}):2===a?Object(n.jsx)(re,{userId:b,advanceStep:i,refresh:o,title:I.title}):3===a?Object(n.jsx)(se,{}):4===a?Object(n.jsx)(le,{}):5===a?Object(n.jsx)(de,{userId:b,advanceStep:i}):6==a?Object(n.jsx)(je,{}):7==a?Object(n.jsx)(Y,{userId:b,advanceStep:i}):8==a?Object(n.jsx)(oe,{displayDetail:I}):Object(n.jsx)(n.Fragment,{}))})]})})},ue=a(115),be=a(14),pe=a(239),ge=a(238),Oe=a(247),me=a(246),xe=a(217),fe=a(235),ve=a(236),ye=a(237),we=a(113),ke=a.n(we),Se=a(240),Ce=a(231),Ie=a(232),Ee=a(233),_e=a(234),Ae=200,Fe="https://api.withlaguna.com",De=Object(Ce.a)((function(e){return{root:{display:"flex"},drawer:Object(y.a)({},e.breakpoints.up("sm"),{width:Ae,flexShrink:0}),appBar:Object(y.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(Ae,"px)"),marginLeft:Ae}),menuButton:Object(y.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:Ae},content:{flexGrow:1,padding:e.spacing(3)}}})),Pe=function(e){var t=e.editId,a=Object(c.useState)(!1),i=Object(j.a)(a,2),r=i[0];i[1];return r&&Object(n.jsx)(ce,{editId:t})},Te=function(e){var t=e.editId;return Object(n.jsx)(Y,{editId:t})},Ne=function(e){var t=e.editId,a=Object(c.useState)([]),i=Object(j.a)(a,2),r=i[0],s=i[1],o=Object(c.useState)({name:"",phone:""}),l=Object(j.a)(o,2),d=l[0],h=l[1],b=Object(c.useState)(""),p=Object(j.a)(b,2),g=p[0],O=p[1];Object(c.useEffect)((function(){u.a.get("".concat(Fe,"/stonks/access/subscribers"),{params:{edit_id:t}}).then((function(e){s(e.data.subscribers)}))}),[]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(M.a,{variant:"h5",children:[r.length?r.length:0," subscribers"]}),Object(n.jsxs)(E.a,{children:[Object(n.jsx)(_.a,{children:Object(n.jsx)(k.a,{children:["Name","Phone","Date added"].map((function(e){return Object(n.jsx)(S.a,{children:e})}))})}),Object(n.jsxs)(A.a,{children:[Object(n.jsxs)(k.a,{children:[Object(n.jsx)(S.a,{children:Object(n.jsx)(C.a,{label:"name",value:d.name,onChange:function(e){return h(Object.assign({},d,{name:e.target.value}))}})}),Object(n.jsx)(S.a,{children:Object(n.jsx)(F.a,{value:d.phone,format:"(###) ###-####",customInput:C.a,onValueChange:function(e){e.formattedValue;var t=e.value;h(Object.assign({},d,{phone:t}))},placeholder:"(555)-123-4567",label:"phone",helperText:g||"",err:!!g})}),Object(n.jsx)(S.a,{children:Object(n.jsx)(I.a,{style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},onClick:function(){u.a.post("".concat(Fe,"/stonks/submit"),Object(w.a)(Object(w.a)({},d),{},{edit_id:t})).then((function(){s([].concat(Object(v.a)(r),[d])),h({name:"",phone:""})})).catch((function(e){e.response?O(e.response.data.err):O("Please email support@withlaguna.com")}))},children:"Add new sub"})})]}),r.map((function(e){return Object(n.jsxs)(k.a,{children:[Object(n.jsx)(S.a,{children:e.name}),Object(n.jsx)(S.a,{children:Object(n.jsx)(F.a,{displayType:"text",value:e.phone,format:"(###) ###-####"})}),Object(n.jsx)(S.a,{children:e.created_date})]})}))]})]})]})};var Ue=function(e){var t=e.window,a=De(),i=Object(g.a)(),r=Object(c.useState)(!1),s=Object(j.a)(r,2),o=s[0],l=s[1],d=function(){l(!o)},h=Object(c.useState)(2),u=Object(j.a)(h,2),b=u[0],p=u[1],O=new URLSearchParams(e.location.search).get("edit");if(!O)return"Access not allowed. If you believe this was in error please contact support";var m=[{title:"My profile",component:Object(n.jsx)(Pe,{editId:O}),icon:Object(n.jsx)(Ie.a,{})},{title:"Portfolios",component:Object(n.jsx)(Te,{}),icon:Object(n.jsx)(Ee.a,{})},{title:"Subscribers",component:Object(n.jsx)(Ne,{editId:O}),icon:Object(n.jsx)(_e.a,{})}],x=Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:a.toolbar}),Object(n.jsx)(xe.a,{children:m.map((function(e,t){return Object(n.jsxs)(fe.a,{button:!0,onClick:function(){return p(t)},selected:b==t,children:[Object(n.jsx)(ve.a,{children:e.icon}),Object(n.jsx)(ye.a,{primary:e.title})]},e.title)}))})]}),f=void 0!==t?function(){return t().document.body}:void 0;return Object(n.jsx)($.a,{container:!0,children:Object(n.jsx)($.a,{item:!0,children:Object(n.jsxs)("div",{className:a.root,children:[Object(n.jsx)(ge.a,{}),Object(n.jsx)(pe.a,{color:"transparent",elevation:0,position:"fixed",className:a.appBar,children:Object(n.jsx)(Se.a,{children:Object(n.jsx)(ee.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:d,className:a.menuButton,children:Object(n.jsx)(ke.a,{})})})}),Object(n.jsxs)("nav",{className:a.drawer,"aria-label":"mailbox folders",children:[Object(n.jsx)(me.a,{smUp:!0,implementation:"css",children:Object(n.jsx)(Oe.a,{container:f,variant:"temporary",anchor:"rtl"===i.direction?"right":"left",open:o,onClose:d,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0},children:x})}),Object(n.jsx)(me.a,{xsDown:!0,implementation:"css",children:Object(n.jsx)(Oe.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0,children:x})})]}),Object(n.jsxs)("main",{className:a.content,children:[Object(n.jsx)("div",{className:a.toolbar}),m[b].component]})]})})})},Be=Object(o.a)({typography:{fontFamily:["Nunito","Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(",")},palette:{secondary:{main:"#ffffff"}}});function Le(){return Object(n.jsx)(l.a,{theme:Be,children:Object(n.jsx)(ue.a,{basename:"",children:Object(n.jsxs)(be.c,{children:[Object(n.jsx)(be.a,{exact:!0,path:"/",component:he}),Object(n.jsx)(be.a,{exact:!0,path:"/admin",component:Ue}),Object(n.jsx)(be.a,{component:function(){return Object(n.jsx)("div",{children:"404 Not found 1"})}})]})})})}var We=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,250)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(Le,{})}),document.getElementById("root")),We()}},[[168,1,2]]]);
//# sourceMappingURL=main.9a8ed92d.chunk.js.map