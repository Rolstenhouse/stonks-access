(this["webpackJsonpstonks-access"]=this["webpackJsonpstonks-access"]||[]).push([[0],{239:function(e,t,a){},240:function(e,t,a){},373:function(e,t){},375:function(e,t){},392:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),i=a.n(c),r=a(14),s=a.n(r),o=(a(239),a(240),a(220)),l=a(467),d=a(209),j=a(26),u=a(64),b=a(8),h=a(16),O=a.n(h),p=a(210),g=a(19),m=a(121),x=a.n(m),f=a(120),v=a.n(f),y=a(50),k=(a(222),a(428)),w=a(432),C=a(474),S=a(439),_=a(440),I=a(441),E=a(442),F=a(54);var A=a(113),D=a(114),P=a(119),T=a(118),N=(a(261),a(443));var B=function(e){Object(P.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).state={value_ticker:n.props.ticker,value_weight:n.props.weight,errText:void 0},n}return Object(D.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsxs)(k.a,{children:[Object(n.jsx)(w.a,{children:Object(n.jsx)(C.a,{value:this.state.value_ticker,placeholder:"AAPL/CASH",InputProps:{style:{color:""==this.state.value_ticker?void 0:this.props.color}},inputProps:{style:{textTransform:"uppercase"}},onChange:function(t){e.setState({value_ticker:t.target.value}),e.props.handleEdit(t.target.value.toUpperCase(),parseFloat(e.state.value_weight),e.props.index)}})}),Object(n.jsx)(w.a,{children:Object(n.jsx)(F.a,{allowNegative:!1,decimalScale:"1",customInput:C.a,placeholder:this.props.weightPlace,InputProps:{endAdornment:Object(n.jsx)(N.a,{position:"start",children:"%"})},onValueChange:function(t){console.log("handle change",t.floatValue),e.setState({value_weight:t.floatValue}),e.props.handleEdit(e.state.value_ticker,t.floatValue,e.props.index)}})})]})}}]),a}(i.a.Component),U=a(216),L=["#0074D9","#FF4136","#2ECC40","#FF851B","#7FDBFF","#B10DC9","#FFDC00","#001f3f","#39CCCC","#01FF70","#85144b","#F012BE","#3D9970","#111111","#AAAAAA"],M=a(66),R="https://api.withlaguna.com",W=function(e){Object(P.a)(a,e);var t=Object(T.a)(a);function a(e){var n;return Object(A.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){console.log(n.props.editId),O.a.get("".concat(R,"/stonks/access/holdings"))},n.handleCreate=function(){O.a.post("".concat(R,"/stonks/holdings/create"),{user_id:n.props.userId,edit_id:n.props.editId,portfolio:n.state.trades.filter((function(e){return!isNaN(e.weight)&&""!=e.ticker}))}).then((function(e){n.props.advanceStep&&n.props.advanceStep(8)})).catch((function(e){if(e.response){var t=e.response.data.errMsg;n.setState({errMsg:t})}}))},n.handleHoldingEdit=function(e,t,a){var c=!0,i=n.state.trades;a+1>=i.length&&""!=e&&!isNaN(t)&&i.push({ticker:"",weight:null}),i[a]={weight:t,ticker:e};var r=i.reduce((function(e,t){return e+(t.weight?parseFloat(t.weight):0)}),0);100!=r&&(c=!1);var s=void 0;i.reduce((function(t,n,c){return t||n.ticker==e&&a!=c&&""!=e}),!1)&&(s="Duplicate ticker: ".concat(e),c=!1),console.log("total weight",r),n.setState({trades:i,total_weight:r,errMsg:s,validPortfolio:c})},n.state={trades:[{ticker:"",weight:null}],total_weight:0,validPortfolio:!1},n}return Object(D.a)(a,[{key:"render",value:function(){var e=this,t=this.state.trades.map((function(e,t){var a=isNaN(e.weight)?0:e.weight;return{title:e.ticker,value:a,color:L[t%L.length]}}));return Object(n.jsxs)("div",{children:[Object(n.jsx)(M.a,{variant:"h4",children:"Manual holdings"}),Object(n.jsx)(M.a,{style:{color:"gray"},variant:"subtitle1",children:"Ensure your percentages add up to 100%"}),Object(n.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",marginTop:20},children:[Object(n.jsxs)("div",{style:{flexGrow:"1",marginLeft:20},children:[Object(n.jsxs)(_.a,{children:[Object(n.jsx)(I.a,{children:Object(n.jsxs)(k.a,{children:[Object(n.jsx)(w.a,{children:"Ticker"}),Object(n.jsx)(w.a,{children:"Percent"})]})}),Object(n.jsx)(E.a,{children:this.state.trades.map((function(t,a){return Object(n.jsx)(B,{weightPlace:(100-e.state.total_weight).toFixed(1),handleEdit:e.handleHoldingEdit,ticker:t.ticker,weight:t.weight,index:a,color:L[a%L.length]})}))}),void 0!=this.state.errMsg&&Object(n.jsx)(M.a,{variant:"caption",style:{color:"red",textAlign:"left",marginTop:5},children:this.state.errMsg})]}),Object(n.jsxs)("div",{style:{textAlign:"right",marginTop:5},children:["Total:"," ",Object(n.jsxs)("span",{style:{color:this.state.total_weight<=100?"green":"red"},children:[this.state.total_weight,"%"," "]})," ","of 100%"]}),Object(n.jsx)(S.a,{disabled:!this.state.validPortfolio,onClick:this.handleCreate,style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white",opacity:this.state.validPortfolio?1:.5,marginTop:20},children:"Create Portfolio"})]}),Object(n.jsx)(U.PieChart,{style:{flexGrow:"1"},radius:20,lineWidth:15,viewBoxSize:[100,100],center:[50,30],lengthAngle:Math.min(this.state.total_weight/100*360,360),data:t})]})]})}}]),a}(i.a.Component),H=a(444),Y=a(445),z=a(446),V=a(447),G=a(449),J=a(456),q=a(468),K=a(448),Q=a(450),X=a(393),Z=a(435),$=a(436),ee=a(475),te=a(452),ae=a(470),ne=a(453),ce=a(454),ie=a(455),re=a(451),se=a(471),oe="https://api.withlaguna.com",le={twitter:H.a,youtube:Y.a,general:z.a,newsletter:V.a},de=function(e){var t=e.links,a=e.setLinks,i=Object.keys(le).map((function(e){return{link_type:e,url:""}})).filter((function(e){return!t.map((function(e){return e.link_type})).includes(e.link_type)})),r=Object(c.useState)({link_type:"",url:""}),s=Object(b.a)(r,2),o=s[0],l=s[1];return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(_.a,{children:[Object(n.jsx)(I.a,{children:Object(n.jsx)(k.a,{children:["Link type (up to 4)","URL",""].map((function(e){return Object(n.jsx)(w.a,{children:e})}))})}),Object(n.jsxs)(E.a,{children:[t.map((function(e,c){var i=le[e.link_type];return Object(n.jsxs)(k.a,{children:[Object(n.jsx)(w.a,{children:Object(n.jsx)(i,{})}),Object(n.jsx)(w.a,{children:e.url}),Object(n.jsx)(w.a,{children:Object(n.jsx)(S.a,{style:{backgroundColor:"#EC4067",color:"white"},onClick:function(){return function(e){var n=t;n.splice(e,1),a(Object(u.a)(n))}(c)},children:"Delete"})})]})})),t.length<4&&Object(n.jsxs)(k.a,{children:[Object(n.jsxs)(w.a,{children:[Object(n.jsx)(q.a,{value:o.link_type,onChange:function(e){return l(Object(j.a)(Object(j.a)({},o),{},{link_type:e.target.value}))},children:i.map((function(e){var t=le[e.link_type];return Object(n.jsx)(K.a,{value:e.link_type,children:Object(n.jsx)(t,{})})}))}),Object(n.jsx)(M.a,{variant:"caption",children:o.link_type})]}),Object(n.jsx)(w.a,{children:Object(n.jsx)(C.a,{value:o.url,onChange:function(e){return l(Object(j.a)(Object(j.a)({},o),{},{url:e.target.value}))}})}),Object(n.jsx)(w.a,{children:Object(n.jsx)(S.a,{onClick:function(){a([].concat(Object(u.a)(t),[o])),l({link_type:"",url:""})},style:{backgroundColor:"#729FBF",color:"white"},children:"Add"})})]})]})]})})},je=function(e){var t=e.advanceStep,a=Object(c.useState)(""),i=Object(b.a)(a,2),r=i[0],s=i[1],o=Object(c.useState)(!1),l=Object(b.a)(o,2),d=l[0],j=l[1],u=Object(g.a)(),h=function(){j(!0)};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(G.a,{}),Object(n.jsx)(M.a,{variant:"h4",children:"Enter your early access code"}),Object(n.jsxs)("form",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},children:[Object(n.jsx)(C.a,{label:"Early Access Code",error:d,value:r,onChange:function(e){return s(e.target.value)},placeholder:"OPEN SESAME",helperText:d&&"Invalid access code. Please try again :)"}),Object(n.jsx)(S.a,{style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white",marginLeft:u.spacing(4)},onClick:function(e){j(!1),O.a.get("".concat(oe,"/stonks/access/code/").concat(r)).then((function(e){e.data.allow?t():h()})).catch((function(){h()}))},children:"Enter"})]})]})},ue=function(e){var t=e.onFormSubmit,a=e.setUserId,i=e.editId,r=e.editDetails,s=e.setEditDetails,o=e.refresh,l=Object(g.a)(),d=Object(c.useState)(!1),j=Object(b.a)(d,2),u=j[0],h=j[1],p=Object(c.useState)(r.title),m=Object(b.a)(p,2),x=m[0],f=m[1],v=Object(c.useState)(r.description),y=Object(b.a)(v,2),k=y[0],w=y[1],_=Object(c.useState)(r.link),I=Object(b.a)(_,2),E=I[0],F=I[1],A=Object(c.useState)(r.subdomain),D=Object(b.a)(A,2),P=D[0],T=D[1],N=Object(c.useState)(r.name),B=Object(b.a)(N,2),U=B[0],L=B[1],R=Object(c.useState)(r.email),W=Object(b.a)(R,2),H=W[0],Y=W[1],z=Object(c.useState)(r.phone),V=Object(b.a)(z,2),G=V[0],J=V[1],q=Object(c.useState)(r.show_amounts),K=Object(b.a)(q,2),ne=K[0],ce=K[1],ie=Object(c.useState)(""),re=Object(b.a)(ie,2),le=(re[0],re[1]),je=Object(c.useState)(r.links),ue=Object(b.a)(je,2),be=ue[0],he=ue[1];Object(c.useEffect)((function(){f(r.title),w(r.description),F(r.link),T(r.subdomain),L(r.name),Y(r.email),J(r.phone),ce(r.show_amounts),he(r.links),i&&O.a.post("".concat(oe,"/stonks/access/exchange"),{edit_id:i}).then((function(e){le(e.data.user)}))}),[r]);var Oe=r.plaid_connected!=!!r.subdomain,pe=function(e){h(!1),O.a.post("".concat(oe,"/stonks/access/form"),{title:x,description:k,link:E,subdomain:P,name:U,email:H,phone:G,show_amounts:"yes"===ne,edit_id:i,links:be}).then((function(e){e.data.allow?(a(e.data.id),s({title:x,description:k,link:E,subdomain:P,show_amounts:ne?"yes":"no",name:U,email:H,phone:G,plaid_connected:r.plaid_connected,editUrl:e.data.editUrl,links:be}),t()):h("An undescribed error occurred")})).catch((function(e){e.response?h(e.response.data.err):h("Please email support@withlaguna.com")}))},ge=Object(c.useState)(""),me=Object(b.a)(ge,2),xe=me[0],fe=me[1],ve=Object(c.useState)(""),ye=Object(b.a)(ve,2),ke=ye[0],we=ye[1],Ce=Object(c.useState)(""),Se=Object(b.a)(Ce,2),_e=Se[0],Ie=Se[1],Ee=function(e){if(i){if(e.subdomain&&e.subdomain==r.subdomain)return;if(e.email&&e.email===r.email)return;if(e.phone&&e.phone===r.phone)return}O.a.get("".concat(oe,"/stonks/access/check_unique"),{params:e}).then((function(e){})).catch((function(){e.subdomain?fe("Subdomain has already been claimed"):e.email?we("Email has already been claimed"):e.phone&&Ie("Phone has already been claimed")}))},Fe="https://".concat(r.subdomain,".withlaguna.com");return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(M.a,{variant:"h4",children:"Account creation and configuration"}),!i&&Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(M.a,{variant:"h6",children:Object(n.jsx)(Q.a,{href:"/#/signin",children:"Sign in"})})}),Oe&&Object(n.jsxs)("div",{style:{padding:l.spacing(4)},children:[Object(n.jsx)(se.a,{severity:"error",children:"Your page is live, but your brokerage hasn't been connected yet"}),Object(n.jsx)(S.a,{style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},onClick:pe,children:"Import your trades"})]}),o&&Object(n.jsxs)("div",{style:{padding:l.spacing(4)},children:[Object(n.jsx)(se.a,{severity:"warning",children:"Your brokerage credentials have expired. Please re-log them"}),Object(n.jsx)(S.a,{style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},onClick:pe,children:"Reconnect"})]}),Object(n.jsxs)("form",{children:[Object(n.jsxs)(X.a,{style:{padding:l.spacing(6),marginBottom:l.spacing(2)},children:[Object(n.jsx)(M.a,{variant:"h6",children:"Your page information"}),Object(n.jsxs)(M.a,{variant:"caption",children:["Used to customize your page :)"," ",Object(n.jsx)(Q.a,{href:"https://rob.withlaguna.com",children:"Sample Site"})]}),Object(n.jsx)(C.a,{value:x,onChange:function(e){return f(e.target.value)},label:"Title",helperText:"Ex) Rob's Stonks",fullWidth:!0}),Object(n.jsx)(C.a,{value:k,onChange:function(e){return w(e.target.value)},label:"Description",helperText:"Ex) Trading on long-term horizons",fullWidth:!0}),Object(n.jsx)(de,{links:be,setLinks:he}),Object(n.jsx)(C.a,{value:P,onChange:function(e){var t=e.target.value;t=t.replace(/\W/g,""),T(t),fe("")},onBlur:function(e){return Ee({subdomain:P})},label:"Desired subdomain",helperText:xe||"i.e enter 'rob' if you want, rob.withlaguna.com",error:!!xe,fullWidth:!0}),Object(n.jsxs)(Z.a,{component:"fieldset",margin:"none",fullWidth:!0,size:"small",style:{textAlign:"left",marginTop:l.spacing(1)},children:[Object(n.jsx)($.a,{component:"legend",children:"Portfolio privacy setting"}),Object(n.jsxs)(ee.a,{"aria-label":"show amounts",name:"Show portfolio amounts",value:ne,onChange:function(e){return ce(e.target.value)},children:[Object(n.jsx)(te.a,{value:"no",control:Object(n.jsx)(ae.a,{color:"primary",size:"small"}),label:"Show portfolio percentage only"}),Object(n.jsx)(te.a,{value:"yes",control:Object(n.jsx)(ae.a,{color:"primary",size:"small"}),label:"Show portfolio amounts in USD"})]})]})]}),Object(n.jsxs)(X.a,{style:{padding:l.spacing(6),marginBottom:l.spacing(2)},children:[Object(n.jsx)(M.a,{variant:"h6",children:"Confidential information"}),Object(n.jsx)(M.a,{variant:"caption",children:"Information entered in this section will NEVER be revealed on your site"}),Object(n.jsx)(C.a,{value:U,onChange:function(e){return L(e.target.value)},label:"Full name",fullWidth:!0}),Object(n.jsx)(C.a,{value:H,onChange:function(e){Y(e.target.value),we("")},onBlur:function(){Ee({email:H})},helperText:ke||"",error:!!ke,label:"Email",fullWidth:!0}),Object(n.jsx)(C.a,{value:G,onChange:function(e){J(e.target.value),Ie("")},onBlur:function(e){return Ee({phone:G})},helperText:_e||"",error:!!_e,label:"Phone",fullWidth:!0})]}),u&&Object(n.jsx)(M.a,{color:"red",children:u}),Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center"},children:[!!r.subdomain&&Object(n.jsxs)("div",{children:[Object(n.jsx)(M.a,{children:"Check out your page: "}),Object(n.jsx)(Q.a,{href:Fe,children:Fe})]}),Object(n.jsxs)(S.a,{style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},onClick:pe,children:[i?"Update":"Submit"," Information"]})]})]})]})},be=function(e){var t=e.userId,a=e.advanceStep,i=Object(c.useState)(!1),r=Object(b.a)(i,2),s=(r[0],r[1],Object(c.useState)({})),o=Object(b.a)(s,2),l=o[0],d=o[1],j=Object(c.useState)(!1),u=Object(b.a)(j,2),h=u[0],p=u[1],g=Object(c.useState)({preview:"",raw:"",name:""}),m=Object(b.a)(g,2),x=m[0],f=m[1],v=function(e){var a=e.replace(/[^\w\d_\-.]+/gi,"");O.a.get("".concat(oe,"/stonks/access/sign/").concat(t),{params:{file_name:a}}).then((function(e){d(e.data)}))};return Object(n.jsx)(n.Fragment,{children:x.preview?h?Object(n.jsx)(ne.a,{}):Object(n.jsxs)(S.a,{style:{backgroundImage:"linear-gradient(to top right, #669bbc, #ecd1e5)",color:"white",fontWeight:800},onClick:function(e){p(!0),e.preventDefault(),console.log(l),console.log(x);var n=new FormData;Object.keys(l.fields).forEach((function(e){var t=l.fields[e];n.append(e,t)})),n.append("file",x.raw);var c={headers:{"content-type":"multipart/form-data"},onUploadProgress:function(e){!function(e){console.log(e)}(parseInt(Math.round(100*e.loaded/e.total)))}};O.a.post("".concat(l.url),n,c).then((function(e){a(3),O.a.get("".concat(oe,"/stonks/access/uploaded/").concat(t)).then((function(e){console.log(e)})).catch(console.error("Did not set manual trade issue"))})).catch(console.error("Uploading problemo")).finally(p(!1))},children:["Upload ",x.name]}):Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(n.jsxs)(S.a,{component:"label",style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},children:["Upload a screenshot of your positions",Object(n.jsx)("input",{type:"file",hidden:!0,onChange:function(e){if(e.target.files.length){var t=e.target.value.split("\\").pop();f({preview:URL.createObjectURL(e.target.files[0]),raw:e.target.files[0],name:t}),v(t)}}})]}),Object(n.jsx)(M.a,{variant:"caption",children:"We'll automatically process the data for you"})]})})},he=function(e){var t=e.advanceStep,a=e.userId,i=e.refresh,r=e.title,s=Object(c.useState)(""),o=Object(b.a)(s,2),l=o[0],d=o[1],j=Object(c.useState)(!1),u=Object(b.a)(j,2),h=u[0],m=u[1],x=Object(c.useState)(!1),f=Object(b.a)(x,2),v=f[0],y=(f[1],Object(g.a)()),k=Object(c.useState)([]),w=Object(b.a)(k,2),C=w[0],_=w[1];Object(c.useEffect)((function(){O.a.get("".concat(oe,"/stonks/access/plaid_token/").concat(a),{params:{refresh:i}}).then((function(e){e.data.link_token?d(e.data.link_token):I()})).catch((function(){I()})),O.a.get("https://api.withlaguna.com/stonks/access/plaid_status").then((function(e){var t;_((null===(t=e.data)||void 0===t?void 0:t.brokers)||[])}))}),[]);var I=function(){m(!0)},E={token:l,onSuccess:Object(c.useCallback)((function(e,n){i?t(3):O.a.post("".concat(oe,"/stonks/access/plaid/").concat(a),{token:e,metadata:n}).then((function(e){e.data.allow?t(3):I()}))}))},F=Object(p.usePlaidLink)(E),A=F.open,D=(F.ready,F.plaidError);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(M.a,{variant:"h5",children:r}),Object(n.jsx)(M.a,{variant:"h4",children:"Connect your investment brokerage"}),Object(n.jsx)(M.a,{children:"Your portfolio is automatically monitored, and trades are immediately updated using Plaid, the standard in brokerage connections."}),Object(n.jsx)(M.a,{variant:"caption",children:"Only read access is allowed"}),(h||D||!r)&&Object(n.jsx)(M.a,{children:" Something went wrong :( "}),Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:y.spacing(2),flexDirection:"column"},children:[Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"column",maxWidth:"400px"},children:[Object(n.jsxs)(S.a,{onClick:function(){A()},style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},children:[Object(n.jsx)("b",{style:{marginRight:"4px"},children:"Auto"})," Connect brokerage"]}),C.map((function(e){return Object(n.jsx)(se.a,{style:{marginTop:y.spacing(2)},severity:"warning",children:e})}))]}),Object(n.jsx)("div",{style:{marginLeft:y.spacing(2),marginRight:y.spacing(2)},children:"or"}),Object(n.jsxs)(S.a,{component:"label",style:{backgroundImage:"linear-gradient(to top right, #bd5fa4, #f27995)",color:"white"},onClick:function(){t(5)},children:[Object(n.jsx)("b",{style:{marginRight:"4px"},children:"EASIEST"})," Upload a screenshot of your positions"]}),Object(n.jsx)(M.a,{variant:"caption",children:"We'll automatically process the data for you"}),Object(n.jsx)("div",{style:{marginLeft:y.spacing(2),marginRight:y.spacing(2)},children:"or"}),Object(n.jsxs)(S.a,{component:"label",style:{backgroundImage:"linear-gradient(to top right, #bd5fa4, #f27995)",color:"white"},onClick:function(){t(7)},children:[Object(n.jsx)("b",{style:{marginRight:"4px"},children:"Manual"})," Enter trades"]})]}),Object(n.jsx)(n.Fragment,{children:v&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(W,{userId:a}),Object(n.jsx)(S.a,{onClick:function(){t()},style:{backgroundImage:"linear-gradient(to top right, #729FBF, #E0CDE1)",color:"white"},children:"CONTINUE"})]})})]})},Oe=function(){var e=x()(),t=e.width,a=e.height;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(v.a,{width:t,height:a}),Object(n.jsx)(M.a,{variant:"h4",children:"Your page is building! We'll send you an email when it's ready"}),Object(n.jsx)(M.a,{variant:"p1",children:"We've gotten reports that our emails are ending in your spam box. Please double-check there as well after ~5 min"}),Object(n.jsx)(M.a,{variant:"caption",children:"Feedback? Email team@withlaguna.com"})]})},pe=function(e){var t=e.displayDetail,a=x()(),c=a.width,i=a.height;console.log("in finish with display",t);var r="".concat("https://").concat(t.subdomain).concat(".withlaguna.com/");return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(v.a,{width:c,height:i}),Object(n.jsxs)(M.a,{variant:"h4",children:["Congrats ",t.name,"!"]}),Object(n.jsx)(M.a,{variant:"h5",children:"Your page is ready at"}),Object(n.jsx)(M.a,{children:Object(n.jsxs)(Q.a,{href:r,children:[t.subdomain,".withLaguna.com"]})}),Object(n.jsxs)(M.a,{style:{marginTop:30},children:["You can edit your profile at ",Object(n.jsx)("br",{}),Object(n.jsx)(Q.a,{href:t.editUrl,children:t.editUrl})]}),Object(n.jsx)(S.a,{href:r,style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white",marginTop:50},children:"View Page"})]})},ge=function(){var e=x()(),t=e.width,a=e.height;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(v.a,{width:t,height:a}),Object(n.jsx)(M.a,{variant:"h4",children:"Thanks for updating your page :)"}),Object(n.jsx)("br",{}),Object(n.jsx)(M.a,{variant:"caption",children:"Feedback? Email team@withlaguna.com"})]})},me=function(e){var t=e.userId,a=e.advanceStep;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("img",{width:"800px",src:"/upload_robinhood.png"}),Object(n.jsx)(be,{userId:t,advanceStep:a})]})},xe=function(e){Object(d.a)(e);var t=Object(c.useState)(!1),a=Object(b.a)(t,2),i=a[0],r=a[1],s=Object(c.useState)(!1),o=Object(b.a)(s,2),l=o[0],j=o[1],u=Object(c.useState)(""),h=Object(b.a)(u,2),p=h[0],m=h[1],x=Object(c.useState)(""),f=Object(b.a)(x,2),v=f[0],y=f[1],k=Object(g.a)();return Object(n.jsxs)("div",{style:{marginLeft:k.spacing(12),marginRight:k.spacing(12)},children:[Object(n.jsx)(M.a,{variant:"h5",children:"Enter your email address to get your sign-in link"}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),!i&&Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(n.jsx)(C.a,{value:v,onChange:function(e){return y(e.target.value)},label:"Email",error:!!p,helperText:p}),Object(n.jsx)("br",{}),l&&Object(n.jsx)(ce.a,{}),Object(n.jsx)(S.a,{component:"label",style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},onClick:function(){j(!0),O.a.get("".concat(oe,"/stonks/access/send"),{params:{email:v}}).then((function(){r(!0)})).catch((function(e){e.response?m(e.response.data.err):m("Please email support@withlaguna.com")})).finally((function(){j(!1)}))},children:"Submit"})]}),!!i&&Object(n.jsx)(M.a,{varian:"body",children:"You've been sent an email. Click it to access your admin page"}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsxs)(M.a,{variant:"caption",children:["Having an issue? ",Object(n.jsx)("a",{href:"mailto:team@withlaguna.com",children:"Contact us"})]})]})},fe=function(){var e=Object(c.useState)(1),t=Object(b.a)(e,2),a=t[0],i=t[1],r=Object(c.useState)(!1),s=Object(b.a)(r,2),o=s[0],l=s[1],d=Object(c.useState)(),j=Object(b.a)(d,2),u=j[0],h=j[1],p=Object(c.useState)(),m=Object(b.a)(p,2),x=m[0],f=m[1],v=Object(c.useState)(!1),y=Object(b.a)(v,2),k=y[0],w=y[1],C=Object(c.useState)({title:"",description:"",link:"",subdomain:"",show_amounts:"no",name:"",email:"",phone:"",plaid_connected:!1,links:[]}),S=Object(b.a)(C,2),_=S[0],I=S[1],E=Object(g.a)();return Object(c.useEffect)((function(){"#/signin"==window.location.hash&&i(6);var e=window.location.search,t=new URLSearchParams(e);t.get("plaid_refresh")&&l(!0);var a=t.get("plaid_login"),n=t.get("edit");n&&(i(1),f(n),a&&(O.a.post("".concat(oe,"/stonks/access/exchange"),{edit_id:n}).then((function(e){h(e.data.user)})),i(2)),O.a.get("".concat(oe,"/stonks/access/edit_info"),{params:{edit_id:n}}).then((function(e){var t=Object.assign({},e.data);t.show_amounts=t.show_amounts?"yes":"no",I(t)})).catch((function(e){console.log(e),w(!0)})))}),[]),Object(n.jsx)(ie.a,{container:!0,justify:"center",alignItems:"center",style:{minHeight:"100vh",backgroundImage:"linear-gradient(to top right, #669bbc, #ecd1e5)"},className:"App",children:Object(n.jsxs)(ie.a,{item:!0,xs:11,sm:8,md:6,children:[(7==a||5==a)&&Object(n.jsxs)(re.a,{size:"small",style:{float:"left",marginTop:E.spacing(3)},onClick:function(){return i(2)},children:[Object(n.jsx)(J.a,{}),"Back"]}),Object(n.jsx)(X.a,{style:{paddingTop:E.spacing(12),paddingBottom:E.spacing(12)},children:a>=0&&(k?Object(n.jsx)("div",{children:"Something went wrong with laguna"}):0===a?Object(n.jsx)(je,{advanceStep:function(){return i(1)}}):1===a?Object(n.jsx)(ue,{onFormSubmit:function(){return _.plaid_connected&&!o?"":i(2)},setUserId:h,refresh:o,editId:x,editDetails:_,setEditDetails:I}):2===a?Object(n.jsx)(he,{userId:u,advanceStep:i,refresh:o,title:_.title}):3===a?Object(n.jsx)(Oe,{}):4===a?Object(n.jsx)(ge,{}):5===a?Object(n.jsx)(me,{userId:u,advanceStep:i}):6==a?Object(n.jsx)(xe,{}):7==a?Object(n.jsx)(W,{userId:u,advanceStep:i}):8==a?Object(n.jsx)(pe,{displayDetail:_}):Object(n.jsx)(n.Fragment,{}))})]})})},ve=a(221),ye=a(18),ke=a(457),we=a(476),Ce=a(438),Se=a(394),_e=a(461),Ie=a(462),Ee=a(463),Fe=a(464),Ae=a(465),De=a(472),Pe=a(473),Te=a(458),Ne=a(459),Be=a(460),Ue=a(466),Le=a(217),Me=a(65),Re=a(142),We=a.n(Re),He=(a(360),a(141)),Ye=a.n(He),ze=200,Ve="https://api.withlaguna.com",Ge=Object(ke.a)((function(e){return{root:{display:"flex"},drawer:Object(y.a)({},e.breakpoints.up("sm"),{width:ze,flexShrink:0}),appBar:Object(y.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(ze,"px)"),marginLeft:ze}),menuButton:Object(y.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:ze},content:{flexGrow:1,padding:e.spacing(3)}}})),Je=function(e){var t=e.editId,a=e.editDetails,i=e.setEditDetails,r=Object(c.useState)(!1),s=Object(b.a)(r,2),o=s[0],l=s[1],d=function(e,t){"clickaway"!==t&&l(!1)};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(ue,{editId:t,editDetails:a,setEditDetails:i,onFormSubmit:function(){l(!0)}}),Object(n.jsx)(we.a,{open:o,autoHideDuration:6e3,onClose:d,children:Object(n.jsx)(se.a,{onClose:d,severity:"success",children:"Updated succesfully!"})})]})},qe=function(e){var t=e.h,a=e.editId,i=Object(Me.convertFromHTML)("<div>".concat(t.memo?t.memo:"","</div>")),r=Me.ContentState.createFromBlockArray(i.contentBlocks,i.entityMap),s=Object(c.useState)(!1),o=Object(b.a)(s,2),l=o[0],d=o[1],j=Object(c.useState)(Me.EditorState.createWithContent(r)),u=Object(b.a)(j,2),h=u[0],p=u[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(k.a,{children:[Object(n.jsx)(w.a,{children:t.ticker_symbol}),Object(n.jsx)(w.a,{children:Ye()(t.memo?t.memo:h.getCurrentContent()&&!l?We()(Object(Me.convertToRaw)(h.getCurrentContent())):Object(n.jsx)(M.a,{variant:"caption",children:"Action needed"}))}),Object(n.jsx)(w.a,{children:Object(n.jsx)(S.a,{style:{backgroundColor:"#729FBF",color:"white"},onClick:function(){l&&O.a.post("".concat(Ve,"/stonks/access/memo/update"),{holding_id:t.id,edit_id:a,memo:We()(Object(Me.convertToRaw)(h.getCurrentContent()))}).then((function(e){})),d(!l)},children:l?"Save":"Edit memo"})})]}),l&&Object(n.jsx)(k.a,{style:{backgroundColor:"#f1f5f8"},children:Object(n.jsx)(w.a,{colSpan:3,children:Object(n.jsx)(Le.Editor,{editorState:h,toolbarClassName:"toolbarClassName",wrapperClassName:"wrapperClassName",editorClassName:"editorClassName",onEditorStateChange:function(e){p(e)},onContentStateChange:function(e){}})})})]})},Ke=function(e){var t=e.editId,a=e.subdomain;Object(c.useEffect)((function(){l()}),[a]);var i=Object(c.useState)([]),r=Object(b.a)(i,2),s=r[0],o=r[1],l=function(){O.a.get("".concat(Ve,"/stonks/holdings/").concat(a)).then((function(e){o(e.data.holdings)}))};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(M.a,{variant:"h4",children:"Holdings & memos"}),Object(n.jsx)(M.a,{style:{color:"gray"},variant:"subtitle1",children:"Holdings below are imported from plaid and manual trades"}),Object(n.jsxs)(_.a,{children:[Object(n.jsx)(I.a,{children:Object(n.jsx)(k.a,{children:["Ticker","Memo","Action"].map((function(e){return Object(n.jsx)(w.a,{children:e})}))})}),Object(n.jsx)(E.a,{children:s.map((function(e){return Object(n.jsx)(qe,{h:e,editId:t})}))})]})]})},Qe=function(e){var t=e.editId,a=e.subdomain;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(ie.a,{container:!0,spacing:2,children:[Object(n.jsx)(ie.a,{item:!0,md:6,children:!!a&&Object(n.jsx)(Ke,{editId:t,subdomain:a})}),Object(n.jsx)(ie.a,{item:!0,md:6,children:Object(n.jsx)(W,{editId:t})})]})})},Xe=function(e){var t=e.editId,a=Object(c.useState)([]),i=Object(b.a)(a,2),r=i[0],s=i[1],o=Object(c.useState)({name:"",phone:""}),l=Object(b.a)(o,2),d=l[0],h=l[1],p=Object(c.useState)(""),g=Object(b.a)(p,2),m=g[0],x=g[1];Object(c.useEffect)((function(){O.a.get("".concat(Ve,"/stonks/access/subscribers"),{params:{edit_id:t}}).then((function(e){s(e.data.subscribers)}))}),[]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)(M.a,{variant:"h5",children:[r.length?r.length:0," subscribers"]}),Object(n.jsxs)(_.a,{children:[Object(n.jsx)(I.a,{children:Object(n.jsx)(k.a,{children:["Name","Phone","Date added"].map((function(e){return Object(n.jsx)(w.a,{children:e})}))})}),Object(n.jsxs)(E.a,{children:[Object(n.jsxs)(k.a,{children:[Object(n.jsx)(w.a,{children:Object(n.jsx)(C.a,{label:"name",value:d.name,onChange:function(e){return h(Object.assign({},d,{name:e.target.value}))}})}),Object(n.jsx)(w.a,{children:Object(n.jsx)(F.a,{value:d.phone,format:"(###) ###-####",customInput:C.a,onValueChange:function(e){var t=e.value;h(Object.assign({},d,{phone:t}))},placeholder:"(555)-123-4567",label:"phone",helperText:m||"",err:!!m})}),Object(n.jsx)(w.a,{children:Object(n.jsx)(S.a,{style:{backgroundImage:"linear-gradient(to top right, #A01A7D, #EC4067)",color:"white"},onClick:function(){O.a.post("".concat(Ve,"/stonks/submit"),Object(j.a)(Object(j.a)({},d),{},{edit_id:t})).then((function(){s([].concat(Object(u.a)(r),[d])),h({name:"",phone:""})})).catch((function(e){e.response?x(e.response.data.err):x("Please email support@withlaguna.com")}))},children:"Add new sub"})})]}),r.map((function(e){return Object(n.jsxs)(k.a,{children:[Object(n.jsx)(w.a,{children:e.name}),Object(n.jsx)(w.a,{children:Object(n.jsx)(F.a,{displayType:"text",value:e.phone,format:"(###) ###-####"})}),Object(n.jsx)(w.a,{children:e.created_date})]})}))]})]})]})};var Ze=function(e){var t=e.window,a=Ge(),i=Object(g.a)(),r=Object(c.useState)(!1),s=Object(b.a)(r,2),o=s[0],l=s[1],d=function(){l(!o)},j=Object(c.useState)(1),u=Object(b.a)(j,2),h=u[0],p=u[1],m=Object(c.useState)({title:"",description:"",link:"",subdomain:"",show_amounts:"no",name:"",email:"",phone:"",plaid_connected:!1,links:[]}),x=Object(b.a)(m,2),f=x[0],v=x[1],y=new URLSearchParams(e.location.search).get("edit");if(Object(c.useEffect)((function(){!function(e,t){O.a.get("".concat(oe,"/stonks/access/edit_info"),{params:{edit_id:e}}).then((function(e){var a=Object.assign({},e.data);a.show_amounts=a.show_amounts?"yes":"no",t(a)})).catch((function(e){t("err")}))}(y,(function(e){console.log(e),v(e)}))}),[]),!y)return"Access not allowed. If you believe this was in error please contact support";var k=[{title:"My profile",component:Object(n.jsx)(Je,{editId:y,editDetails:f,setEditDetails:v}),icon:Object(n.jsx)(Te.a,{})},{title:"Portfolios",component:Object(n.jsx)(Qe,{editId:y,subdomain:f.subdomain}),icon:Object(n.jsx)(Ne.a,{})},{title:"Subscribers",component:Object(n.jsx)(Xe,{editId:y}),icon:Object(n.jsx)(Be.a,{})}],w=Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:a.toolbar}),Object(n.jsx)(Ce.a,{children:k.map((function(e,t){return Object(n.jsxs)(Se.a,{button:!0,onClick:function(){return p(t)},selected:h==t,children:[Object(n.jsx)(_e.a,{children:e.icon}),Object(n.jsx)(Ie.a,{primary:e.title})]},e.title)}))})]}),C=void 0!==t?function(){return t().document.body}:void 0;return Object(n.jsx)(ie.a,{container:!0,children:Object(n.jsx)(ie.a,{item:!0,children:Object(n.jsxs)("div",{className:a.root,children:[Object(n.jsx)(Ee.a,{}),Object(n.jsx)(Fe.a,{color:"transparent",elevation:0,position:"fixed",className:a.appBar,children:Object(n.jsx)(Ae.a,{children:Object(n.jsx)(re.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:d,className:a.menuButton,children:Object(n.jsx)(Ue.a,{})})})}),Object(n.jsxs)("nav",{className:a.drawer,"aria-label":"mailbox folders",children:[Object(n.jsx)(De.a,{smUp:!0,implementation:"css",children:Object(n.jsx)(Pe.a,{container:C,variant:"temporary",anchor:"rtl"===i.direction?"right":"left",open:o,onClose:d,classes:{paper:a.drawerPaper},ModalProps:{keepMounted:!0},children:w})}),Object(n.jsx)(De.a,{xsDown:!0,implementation:"css",children:Object(n.jsx)(Pe.a,{classes:{paper:a.drawerPaper},variant:"permanent",open:!0,children:w})})]}),Object(n.jsxs)("main",{className:a.content,children:[Object(n.jsx)("div",{className:a.toolbar}),k[h].component]})]})})})},$e=Object(o.a)({typography:{fontFamily:["Nunito","Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(",")},palette:{secondary:{main:"#ffffff"}}});function et(){return Object(n.jsx)(l.a,{theme:$e,children:Object(n.jsx)(ve.a,{basename:"",children:Object(n.jsxs)(ye.c,{children:[Object(n.jsx)(ye.a,{exact:!0,path:"/",component:fe}),Object(n.jsx)(ye.a,{exact:!0,path:"/admin",component:Ze}),Object(n.jsx)(ye.a,{component:function(){return Object(n.jsx)("div",{children:"404 Not found 1"})}})]})})})}var tt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,478)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),n(e),c(e),i(e),r(e)}))};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(et,{})}),document.getElementById("root")),tt()}},[[392,1,2]]]);
//# sourceMappingURL=main.e5e00e98.chunk.js.map