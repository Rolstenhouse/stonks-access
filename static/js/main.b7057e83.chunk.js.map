{"version":3,"sources":["AccessForm.js","App.js","reportWebVitals.js","index.js"],"names":["AccessCode","advanceStep","useState","input","setInput","error","setError","theme","useTheme","handleFailure","Lock","Typography","variant","style","display","flexDirection","alignItems","justifyContent","TextField","label","value","onChange","e","target","placeholder","helperText","Button","backgroundImage","color","marginLeft","spacing","onClick","axios","get","then","res","data","allow","catch","UserInfo","setUserId","editId","editDetails","title","setTitle","description","setDescription","link","setLink","subdomain","setSubdomain","name","setName","email","setEmail","phone","setPhone","show_amounts","showAmounts","setShowAmounts","subdomainError","setSubdomainError","emailError","setEmailError","phoneError","setPhoneError","checkUnique","body","params","Paper","padding","marginBottom","Link","href","fullWidth","onBlur","FormControl","component","margin","size","textAlign","marginTop","FormLabel","RadioGroup","aria-label","FormControlLabel","control","Radio","post","edit","id","PlaidInfo","userId","refresh","token","setToken","useEffect","link_token","config","onSuccess","useCallback","metadata","usePlaidLink","open","plaidError","ready","Wait","useWindowSize","width","height","AccessForm","step","setStep","setRefresh","setEditId","setEditDetails","search","window","location","URLSearchParams","plaid_refresh_id","plaid_login_id","edit_id","editable","Object","assign","err","console","log","Grid","container","justify","minHeight","item","xs","sm","md","paddingTop","paddingBottom","createMuiTheme","typography","fontFamily","join","palette","secondary","main","App","ThemeProvider","className","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b7057e83.chunk.js","sourcesContent":["import React, { useState, useCallback, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { usePlaidLink } from \"react-plaid-link\";\n\nimport { Lock } from \"@material-ui/icons\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport useWindowSize from \"react-use/lib/useWindowSize\";\nimport Confetti from \"react-confetti\";\n\n/*********\n * 3 Steps:\n * 1) Check Access Code\n * 2) Add email (and other information), phone, (not displayed), url to show, subdomain, title, byline\n * 3) Connect plaid\n * 4) Wait a day for the page to be created\n */\n\nimport {\n  Grid,\n  Paper,\n  TextField,\n  Button,\n  Typography,\n  FormControl,\n  FormLabel,\n  RadioGroup,\n  FormControlLabel,\n  Radio,\n  Link,\n} from \"@material-ui/core\";\n\nconst AccessCode = ({ advanceStep }) => {\n  const [input, setInput] = useState(\"\");\n  const [error, setError] = useState(false);\n  const theme = useTheme();\n\n  const handleFailure = () => {\n    setError(true);\n  };\n\n  const handleSubmit = (e) => {\n    setError(false);\n    axios\n      .get(`https://api.withlaguna.com/stonks/access/code/${input}`)\n      .then((res) => {\n        if (res.data.allow) {\n          advanceStep();\n        } else {\n          handleFailure();\n        }\n      })\n      .catch(() => {\n        handleFailure();\n      });\n  };\n\n  return (\n    <>\n      <Lock />\n      <Typography variant=\"h4\">Enter your early access code</Typography>\n      <form\n        style={{\n          display: \"flex\",\n          flexDirection: \"row\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n        }}\n      >\n        <TextField\n          label=\"Early Access Code\"\n          error={error}\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          placeholder=\"OPEN SESAME\"\n          helperText={error && \"Invalid access code. Please try again :)\"}\n        />\n        <Button\n          style={{\n            backgroundImage: \"linear-gradient(to top right, #A01A7D, #EC4067)\",\n            color: \"white\",\n            marginLeft: theme.spacing(4),\n          }}\n          onClick={handleSubmit}\n        >\n          Enter\n        </Button>\n      </form>\n    </>\n  );\n};\n\nconst UserInfo = ({ advanceStep, setUserId, editId, editDetails }) => {\n  const theme = useTheme();\n  const [error, setError] = useState(false);\n\n  const handleFailure = () => {\n    setError(true);\n  };\n\n  const [title, setTitle] = useState(editDetails.title);\n  const [description, setDescription] = useState(editDetails.description);\n  const [link, setLink] = useState(editDetails.link);\n  const [subdomain, setSubdomain] = useState(editDetails.subdomain);\n  const [name, setName] = useState(editDetails.name);\n  const [email, setEmail] = useState(editDetails.email);\n  const [phone, setPhone] = useState(editDetails.phone);\n  const [showAmounts, setShowAmounts] = useState(editDetails.show_amounts);\n\n  const handleSubmit = (e) => {\n    setError(false);\n    axios\n      .post(`https://api.withlaguna.com/stonks/access/form`, {\n        title: title,\n        description: description,\n        link: link,\n        subdomain: subdomain,\n        name: name,\n        email: email,\n        phone: phone,\n        show_amounts: showAmounts === \"yes\",\n        edit: editId,\n      })\n      .then((res) => {\n        if (res.data.allow) {\n          setUserId(res.data.id);\n          advanceStep();\n        } else {\n          handleFailure();\n        }\n      })\n      .catch(() => {\n        handleFailure();\n      });\n  };\n\n  const [subdomainError, setSubdomainError] = useState(\"\");\n  const [emailError, setEmailError] = useState(\"\");\n  const [phoneError, setPhoneError] = useState(\"\");\n  const checkUnique = (body) => {\n    axios\n      .get(`https://api.withlaguna.com/stonks/access/check_unique`, {\n        params: body,\n      })\n      .then((res) => {})\n      .catch(() => {\n        if (body.subdomain)\n          setSubdomainError(\"Subdomain has already been claimed\");\n        else if (body.email) setEmailError(\"Email has already been claimed\");\n        else if (body.phone) setPhoneError(\"Phone has already been claimed\");\n      });\n  };\n\n  return (\n    <>\n      <Typography variant=\"h4\">Account creation and configuration</Typography>\n      <form>\n        <Paper\n          style={{ padding: theme.spacing(6), marginBottom: theme.spacing(2) }}\n        >\n          <Typography variant=\"h6\">Your page information</Typography>\n          <Typography variant=\"caption\">\n            Used to customize your page :){\" \"}\n            <Link href=\"https://rob.withlaguna.com\">Sample Site</Link>\n          </Typography>\n          <TextField\n            value={title}\n            onChange={(e) => setTitle(e.target.value)}\n            label=\"Title\"\n            helperText=\"Ex) Rob's Stonks\"\n            fullWidth\n          ></TextField>\n          <TextField\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            label=\"Description\"\n            helperText=\"Ex) Trading on long-term horizons\"\n            fullWidth\n          ></TextField>\n          <TextField\n            value={link}\n            onChange={(e) => setLink(e.target.value)}\n            label=\"Personal Bio Link (optional)\"\n            helperText=\"Twitter handle, website, Linkedin, etc. Write as https://withterra.com\"\n            fullWidth\n          ></TextField>\n          <TextField\n            value={subdomain}\n            onChange={(e) => {\n              setSubdomain(e.target.value);\n              setSubdomainError(\"\");\n            }}\n            onBlur={(e) => checkUnique({ subdomain: subdomain })}\n            label=\"Desired subdomain\"\n            helperText={\n              !!subdomainError\n                ? subdomainError\n                : \"i.e enter 'rob' if you want, rob.withlaguna.com\"\n            }\n            error={!!subdomainError}\n            fullWidth\n          ></TextField>\n          <FormControl\n            component=\"fieldset\"\n            margin=\"none\"\n            fullWidth\n            size=\"small\"\n            style={{ textAlign: \"left\", marginTop: theme.spacing(1) }}\n          >\n            <FormLabel component=\"legend\">Portfolio privacy setting</FormLabel>\n            <RadioGroup\n              aria-label=\"show amounts\"\n              name=\"Show portfolio amounts\"\n              value={showAmounts}\n              onChange={(e) => setShowAmounts(e.target.value)}\n            >\n              <FormControlLabel\n                value=\"no\"\n                control={<Radio color=\"primary\" size=\"small\" />}\n                label=\"Show portfolio percentage only\"\n              />\n              <FormControlLabel\n                value=\"yes\"\n                control={<Radio color=\"primary\" size=\"small\" />}\n                label=\"Show portfolio amounts in USD\"\n              />\n            </RadioGroup>\n          </FormControl>\n        </Paper>\n        <Paper\n          style={{ padding: theme.spacing(6), marginBottom: theme.spacing(2) }}\n        >\n          <Typography variant=\"h6\">Confidential information</Typography>\n          <Typography variant=\"caption\">\n            Information entered in this section will NEVER be revealed on your\n            site\n          </Typography>\n          <TextField\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n            label=\"Full name\"\n            fullWidth\n          ></TextField>\n          <TextField\n            value={email}\n            onChange={(e) => {\n              setEmail(e.target.value);\n              setEmailError(\"\");\n            }}\n            onBlur={() => {\n              checkUnique({ email: email });\n            }}\n            helperText={!!emailError ? emailError : \"\"}\n            error={!!emailError}\n            label=\"Email\"\n            fullWidth\n          ></TextField>\n          <TextField\n            value={phone}\n            onChange={(e) => {\n              setPhone(e.target.value);\n              setPhoneError(\"\");\n            }}\n            onBlur={(e) => checkUnique({ phone: phone })}\n            helperText={!!phoneError ? phoneError : \"\"}\n            error={!!phoneError}\n            label=\"Phone\"\n            fullWidth\n          ></TextField>\n        </Paper>\n        {error && (\n          <Typography color=\"red\">\n            Something went wrong :(. Please double check your information\n          </Typography>\n        )}\n        <Button\n          style={{\n            backgroundImage: \"linear-gradient(to top right, #A01A7D, #EC4067)\",\n            color: \"white\",\n          }}\n          onClick={handleSubmit}\n        >\n          Submit Information\n        </Button>\n      </form>\n    </>\n  );\n};\n\nconst PlaidInfo = ({ advanceStep, userId, refresh }) => {\n  const [token, setToken] = useState(\"\");\n  const [error, setError] = useState(false);\n  const theme = useTheme();\n\n  useEffect(() => {\n    axios\n      .get(`https://api.withlaguna.com/stonks/access/plaid_token/${userId}`, {\n        params: {\n          refresh: refresh,\n        },\n      })\n      .then((res) => {\n        if (res.data.link_token) {\n          setToken(res.data.link_token);\n        } else {\n          handleFailure();\n        }\n      })\n      .catch(() => {\n        handleFailure();\n      });\n  }, []);\n\n  const handleFailure = () => {\n    setError(true);\n  };\n\n  const onSuccess = useCallback((token, metadata) => {\n    // when refreshing no need to post any new data\n    if (refresh) {\n      advanceStep();\n      return;\n    }\n    axios\n      .post(`https://api.withlaguna.com/stonks/access/plaid/${userId}`, {\n        token: token,\n        metadata: metadata,\n      })\n      .then((res) => {\n        if (res.data.allow) {\n          advanceStep();\n        } else {\n          handleFailure();\n        }\n      });\n  });\n\n  const config = {\n    token: token,\n    onSuccess,\n  };\n\n  const { open, ready, plaidError } = usePlaidLink(config);\n\n  return (\n    <>\n      <Typography variant=\"h4\">Connect your investment brokerage</Typography>\n      <Typography>\n        Your portfolio is automatically monitored, and trades are immediately\n        updated using Plaid, the standard in banking connections.\n      </Typography>\n      <Typography variant=\"caption\">Only read access is allowed</Typography>\n      {(error || plaidError) && (\n        <Typography> Something went wrong :( </Typography>\n      )}\n      <Button\n        onClick={() => {\n          open();\n        }}\n        style={{\n          backgroundImage: \"linear-gradient(to top right, #A01A7D, #EC4067)\",\n          color: \"white\",\n          display: \"flex\",\n          margin: \"auto\",\n          marginTop: theme.spacing(2),\n        }}\n      >\n        Connect bank account\n      </Button>\n    </>\n  );\n};\n\nconst Wait = () => {\n  const { width, height } = useWindowSize();\n\n  return (\n    <>\n      <Confetti width={width} height={height} />\n      <Typography variant=\"h4\">\n        Your page is building! We'll send you an email when it's ready\n      </Typography>\n      <Typography variant=\"caption\">\n        Feedback? Email team@withlaguna.com\n      </Typography>\n    </>\n  );\n};\n\nexport const AccessForm = () => {\n  // Ignore Access Code\n  const [step, setStep] = useState(1);\n  const [refresh, setRefresh] = useState(false);\n  const [userId, setUserId] = useState();\n  const [editId, setEditId] = useState();\n  const [editDetails, setEditDetails] = useState({\n    title: \"\",\n    description: \"\",\n    link: \"\",\n    subdomain: \"\",\n    show_amounts: \"no\",\n    name: \"\",\n    email: \"\",\n    phone: \"\",\n  });\n  const theme = useTheme();\n\n  // IF in refresh mode\n  useEffect(() => {\n    let search = window.location.search;\n    let params = new URLSearchParams(search);\n    let plaid_refresh_id = params.get(\"plaid_refresh\");\n    if (!!plaid_refresh_id) {\n      setStep(2);\n      setRefresh(true);\n      setUserId(plaid_refresh_id);\n    }\n    let plaid_login_id = params.get(\"plaid_login\");\n    if (!!plaid_login_id) {\n      setStep(2);\n      setUserId(plaid_login_id);\n    }\n    let edit_id = params.get(\"edit\");\n    if (!!edit_id) {\n      setStep(1);\n      setEditId(edit_id);\n\n      // fetch initial props\n      axios\n        .get(`https://api.withlaguna.com/stonks/access/edit_info`, {\n          params: {\n            edit: edit_id,\n          },\n        })\n        .then((res) => {\n          let editable = Object.assign({}, res.data);\n          editable.show_amounts = !!editable.show_amounts ? \"yes\" : \"no\";\n          setEditDetails(editable);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  }, []);\n\n  function renderStep() {\n    if (step === 0) return <AccessCode advanceStep={() => setStep(1)} />;\n    else if (step === 1)\n      return (\n        <UserInfo\n          advanceStep={() => setStep(2)}\n          setUserId={setUserId}\n          editId={editId}\n          editDetails={editDetails}\n        />\n      );\n    else if (step === 2)\n      return (\n        <PlaidInfo\n          userId={userId}\n          advanceStep={() => setStep(3)}\n          refresh={refresh}\n        />\n      );\n    else if (step === 3) return <Wait />;\n    else return <></>;\n  }\n\n  return (\n    <Grid\n      container\n      justify=\"center\"\n      alignItems=\"center\"\n      style={{\n        minHeight: \"100vh\",\n        backgroundImage: \"linear-gradient(to top right, #669bbc, #ecd1e5)\",\n      }}\n    >\n      <Grid item xs={11} sm={8} md={6}>\n        <Paper\n          style={{\n            paddingTop: theme.spacing(12),\n            paddingBottom: theme.spacing(12),\n          }}\n        >\n          {step >= 0 && renderStep()}\n        </Paper>\n      </Grid>\n    </Grid>\n  );\n};\n","import \"./App.css\";\n\nimport { createMuiTheme } from \"@material-ui/core/styles\";\nimport {ThemeProvider} from \"@material-ui/core\"\nimport {AccessForm} from \"./AccessForm.js\"\n\nconst theme = createMuiTheme({\n  typography: {\n    fontFamily: [\n      \"Nunito\",\n      \"Roboto\",\n      '\"Helvetica Neue\"',\n      \"Arial\",\n      \"sans-serif\",\n    ].join(\",\"),\n  },\n  palette: {\n    secondary: {\n      main: \"#ffffff\",\n    },\n  },\n});\n\nfunction App() {\n  return (\n    <ThemeProvider theme={theme}>\n      <div className=\"App\">\n        <AccessForm/>\n      </div>\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}